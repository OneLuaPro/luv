<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<link href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; --title-bar-height: 20px; }
.mac-os-11 { --title-bar-height: 28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
h1, h2, h3, h4, h5 { white-space: pre-wrap; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; position: relative; }
#write svg h1, #write svg h2, #write svg h3, #write svg h4, #write svg h5, #write svg h6, #write svg p { position: static; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
thead, tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
svg { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; border-color: transparent !important; padding-top: 0px !important; padding-bottom: 0px !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  #write > p:nth-child(1) { margin-top: 0px; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
  figure { overflow-x: visible; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.reversefootnote { font-family: ui-monospace, sans-serif; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.mermaid-svg { margin: auto; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex: 2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; overflow-wrap: anywhere; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.42857rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left: 28px solid transparent; border-right: 28px solid transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right: 8px solid transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }
mjx-container { break-inside: avoid; }
.md-alert.md-alert-note { border-left-color: rgb(9, 105, 218); }
.md-alert.md-alert-important { border-left-color: rgb(130, 80, 223); }
.md-alert.md-alert-warning { border-left-color: rgb(154, 103, 0); }
.md-alert.md-alert-tip { border-left-color: rgb(31, 136, 61); }
.md-alert.md-alert-caution { border-left-color: rgb(207, 34, 46); }
.md-alert { padding: 0px 1em; margin-bottom: 16px; color: inherit; border-left: 0.25em solid rgb(0, 0, 0); }
.md-alert-text-note { color: rgb(9, 105, 218); }
.md-alert-text-important { color: rgb(130, 80, 223); }
.md-alert-text-warning { color: rgb(154, 103, 0); }
.md-alert-text-tip { color: rgb(31, 136, 61); }
.md-alert-text-caution { color: rgb(207, 34, 46); }
.md-alert-text { font-size: 0.9rem; font-weight: 700; }
.md-alert-text svg { fill: currentcolor; position: relative; top: 0.125em; margin-right: 1ch; overflow: visible; }
.md-alert-text-container::after { content: attr(data-text); text-transform: capitalize; pointer-events: none; margin-right: 1ch; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, 'Segoe UI Emoji', sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table th:first-child,
table td:first-child {
    margin-top: 0;
}
table th:last-child,
table td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    pre {
        page-break-inside: avoid;
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.mac-os #write{
    caret-color: AccentColor;
}

.md-lang {
    color: #b4654d;
}

/*.html-for-mac {
    --item-hover-bg-color: #E6F0FE;
}*/

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
    opacity: 0.4;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

.menu-item-container a.menu-style-btn {
    background-color: #f5f8fa;
    background-image: linear-gradient( 180deg , hsla(0, 0%, 100%, 0.8), hsla(0, 0%, 100%, 0)); 
}



</style><title>docs</title>
</head>
<body class='typora-export os-windows'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='libuv-in-lua'><span>LibUV in Lua</span></h1><p><span>The </span><a href='https://github.com/luvit/luv' target='_blank'><span>luv</span></a><span> project provides access to the multi-platform support library</span>
<a href='https://github.com/libuv/libuv' target='_blank'><span>libuv</span></a><span> in Lua code. It was primarily developed for the </span><a href='https://github.com/luvit/luvit' target='_blank'><span>luvit</span></a><span> project as</span>
<span>the built-in </span><code>uv</code><span> module, but can be used in other Lua environments.</span></p><p><span>More information about the core libuv library can be found at the original</span>
<a href='http://docs.libuv.org/' target='_blank'><span>libuv documentation page</span></a><span>.</span></p><h3 id='tcp-echo-server-example'><span>TCP Echo Server Example</span></h3><p><span>Here is a small example showing a TCP echo server:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">uv</span> = <span class="cm-builtin">require</span>(<span class="cm-string">"luv"</span>) <span class="cm-comment">-- "luv" when stand-alone, "uv" in luvi apps</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">server</span> = <span class="cm-variable">uv.new_tcp</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">server</span>:<span class="cm-variable">bind</span>(<span class="cm-string">"127.0.0.1"</span>, <span class="cm-number">1337</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">server</span>:<span class="cm-variable">listen</span>(<span class="cm-number">128</span>, <span class="cm-keyword">function</span> (<span class="cm-variable">err</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">assert</span>(<span class="cm-keyword">not</span> <span class="cm-variable">err</span>, <span class="cm-variable">err</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">local</span> <span class="cm-variable">client</span> = <span class="cm-variable">uv.new_tcp</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">server</span>:<span class="cm-variable">accept</span>(<span class="cm-variable">client</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">client</span>:<span class="cm-variable">read_start</span>(<span class="cm-keyword">function</span> (<span class="cm-variable">err</span>, <span class="cm-variable">chunk</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-builtin">assert</span>(<span class="cm-keyword">not</span> <span class="cm-variable">err</span>, <span class="cm-variable">err</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-variable">chunk</span> <span class="cm-keyword">then</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">client</span>:<span class="cm-builtin">write</span>(<span class="cm-variable">chunk</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">else</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">client</span>:<span class="cm-variable">shutdown</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">client</span>:<span class="cm-builtin">close</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">end</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-string">"TCP server listening at 127.0.0.1 port 1337"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">uv.run</span>() <span class="cm-comment">-- an explicit run call is necessary outside of luvit</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 461px;"></div><div class="CodeMirror-gutters" style="display: none; height: 461px;"></div></div></div></pre><h3 id='module-layout'><span>Module Layout</span></h3><p><span>The luv library contains a single Lua module referred to hereafter as </span><code>uv</code><span> for</span>
<span>simplicity. This module consists mostly of functions with names corresponding to</span>
<span>their original libuv versions. For example, the libuv function </span><code>uv_tcp_bind</code><span> has</span>
<span>a luv version at </span><code>uv.tcp_bind</code><span>. Currently, only two non-function fields exists:</span>
<code>uv.constants</code><span> and </span><code>uv.errno</code><span>, which are tables.</span></p><h3 id='functions-vs-methods'><span>Functions vs Methods</span></h3><p><span>In addition to having simple functions, luv provides an optional method-style</span>
<span>API. For example, </span><code>uv.tcp_bind(server, host, port)</code><span> can alternatively be called</span>
<span>as </span><code>server:bind(host, port)</code><span>. Note that the first argument </span><code>server</code><span> becomes the</span>
<span>object and </span><code>tcp_</code><span> is removed from the function name. Method forms are</span>
<span>documented below where they exist.</span></p><h3 id='synchronous-vs-asynchronous-functions'><span>Synchronous vs Asynchronous Functions</span></h3><p><span>Functions that accept a callback are asynchronous. These functions may</span>
<span>immediately return results to the caller to indicate their initial status, but</span>
<span>their final execution is deferred until at least the next libuv loop iteration.</span>
<span>After completion, their callbacks are executed with any results passed to it.</span></p><p><span>Functions that do not accept a callback are synchronous. These functions</span>
<span>immediately return their results to the caller.</span></p><p><span>Some (generally FS and DNS) functions can behave either synchronously or</span>
<span>asynchronously. If a callback is provided to these functions, they behave</span>
<span>asynchronously; if no callback is provided, they behave synchronously.</span></p><h3 id='pseudo-types'><span>Pseudo-Types</span></h3><p><span>Some unique types are defined. These are not actual types in Lua, but they are</span>
<span>used here to facilitate documenting consistent behavior:</span></p><ul><li><p><code>fail</code><span>: an assertable </span><code>nil, string, string</code><span> tuple (see </span><a href='#error-handling' target='_blank'><span>Error handling</span></a><span>)</span></p></li><li><p><code>callable</code><span>: a </span><code>function</code><span>; or a </span><code>table</code><span> or </span><code>userdata</code><span> with a </span><code>__call</code>
<span>metamethod</span></p></li><li><p><code>buffer</code><span>: a </span><code>string</code><span> or a sequential </span><code>table</code><span> of </span><code>string</code><span>s</span></p></li><li><p><code>threadargs</code><span>: variable arguments (</span><code>...</code><span>) of type </span><code>nil</code><span>, </span><code>boolean</code><span>, </span><code>number</code><span>,</span>
<code>string</code><span>, or </span><code>userdata</code><span>, numbers of argument limited to 9.</span></p></li></ul><h2 id='contents'><span>Contents</span></h2><p><span>This documentation is mostly a retelling of the </span><a href='http://docs.libuv.org/en/v1.x/api.html' target='_blank'><span>libuv API documentation</span></a>
<span>within the context of luv&#39;s Lua API. Low-level implementation details and</span>
<span>unexposed C functions and types are not documented here except for when they</span>
<span>are relevant to behavior seen in the Lua module.</span></p><ul><li><p><a href='#constants' target='_blank'><span>Constants</span></a></p></li><li><p><a href='#error-handling' target='_blank'><span>Error handling</span></a></p></li><li><p><a href='#version-checking' target='_blank'><span>Version checking</span></a></p></li><li><p><a href='#uv_loop_t--event-loop' target='_blank'><code>uv_loop_t</code></a><span> — Event loop</span></p></li><li><p><a href='#uv_req_t--base-request' target='_blank'><code>uv_req_t</code></a><span> — Base request</span></p></li><li><p><a href='#uv_handle_t--base-handle' target='_blank'><code>uv_handle_t</code></a><span> — Base handle</span></p><ul><li><p><a href='#uv_timer_t--timer-handle' target='_blank'><code>uv_timer_t</code></a><span> — Timer handle</span></p></li><li><p><a href='#uv_prepare_t--prepare-handle' target='_blank'><code>uv_prepare_t</code></a><span> — Prepare handle</span></p></li><li><p><a href='#uv_check_t--check-handle' target='_blank'><code>uv_check_t</code></a><span> — Check handle</span></p></li><li><p><a href='#uv_idle_t--idle-handle' target='_blank'><code>uv_idle_t</code></a><span> — Idle handle</span></p></li><li><p><a href='#uv_async_t--async-handle' target='_blank'><code>uv_async_t</code></a><span> — Async handle</span></p></li><li><p><a href='#uv_poll_t--poll-handle' target='_blank'><code>uv_poll_t</code></a><span> — Poll handle</span></p></li><li><p><a href='#uv_signal_t--signal-handle' target='_blank'><code>uv_signal_t</code></a><span> — Signal handle</span></p></li><li><p><a href='#uv_process_t--process-handle' target='_blank'><code>uv_process_t</code></a><span> — Process handle</span></p></li><li><p><a href='#uv_stream_t--stream-handle' target='_blank'><code>uv_stream_t</code></a><span> — Stream handle</span></p><ul><li><p><a href='#uv_tcp_t--tcp-handle' target='_blank'><code>uv_tcp_t</code></a><span> — TCP handle</span></p></li><li><p><a href='#uv_pipe_t--pipe-handle' target='_blank'><code>uv_pipe_t</code></a><span> — Pipe handle</span></p></li><li><p><a href='#uv_tty_t--tty-handle' target='_blank'><code>uv_tty_t</code></a><span> — TTY handle</span></p></li></ul></li><li><p><a href='#uv_udp_t--udp-handle' target='_blank'><code>uv_udp_t</code></a><span> — UDP handle</span></p></li><li><p><a href='#uv_fs_event_t--fs-event-handle' target='_blank'><code>uv_fs_event_t</code></a><span> — FS Event handle</span></p></li><li><p><a href='#uv_fs_poll_t--fs-poll-handle' target='_blank'><code>uv_fs_poll_t</code></a><span> — FS Poll handle</span></p></li></ul></li><li><p><a href='#file-system-operations' target='_blank'><span>File system operations</span></a></p></li><li><p><a href='#thread-pool-work-scheduling' target='_blank'><span>Thread pool work scheduling</span></a></p></li><li><p><a href='#dns-utility-functions' target='_blank'><span>DNS utility functions</span></a></p></li><li><p><a href='#threading-and-synchronization-utilities' target='_blank'><span>Threading and synchronization utilities</span></a></p></li><li><p><a href='#miscellaneous-utilities' target='_blank'><span>Miscellaneous utilities</span></a></p></li><li><p><a href='#metrics-operations' target='_blank'><span>Metrics operations</span></a></p></li></ul><h2 id='constants'><span>Constants</span></h2><p><span>As a Lua library, luv supports and encourages the use of lowercase strings to</span>
<span>represent options. For example:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- signal start with string input</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">uv.signal_start</span>(<span class="cm-string">"sigterm"</span>, <span class="cm-keyword">function</span>(<span class="cm-variable">signame</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">print</span>(<span class="cm-variable">signame</span>) <span class="cm-comment">-- string output: "sigterm"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><p><span>However, luv also superficially exposes libuv constants in a Lua table at</span>
<code>uv.constants</code><span> where its keys are uppercase constant names and their associated</span>
<span>values are integers defined internally by libuv. The values from this table may</span>
<span>be supported as function arguments, but their use may not change the output</span>
<span>type. For example:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- signal start with integer input</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">uv.signal_start</span>(<span class="cm-variable">uv.constants.SIGTERM</span>, <span class="cm-keyword">function</span>(<span class="cm-variable">signame</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">print</span>(<span class="cm-variable">signame</span>) <span class="cm-comment">-- string output: "sigterm"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><p><span>The uppercase constants defined in </span><code>uv.constants</code><span> that have associated</span>
<span>lowercase option strings are listed below.</span></p><h3 id='address-families'><span>Address Families</span></h3><ul><li><p><code>AF_UNIX</code><span>: &quot;unix&quot;</span></p></li><li><p><code>AF_INET</code><span>: &quot;inet&quot;</span></p></li><li><p><code>AF_INET6</code><span>: &quot;inet6&quot;</span></p></li><li><p><code>AF_IPX</code><span>: &quot;ipx&quot;</span></p></li><li><p><code>AF_NETLINK</code><span>: &quot;netlink&quot;</span></p></li><li><p><code>AF_X25</code><span>: &quot;x25&quot;</span></p></li><li><p><code>AF_AX25</code><span>: &quot;as25&quot;</span></p></li><li><p><code>AF_ATMPVC</code><span>: &quot;atmpvc&quot;</span></p></li><li><p><code>AF_APPLETALK</code><span>: &quot;appletalk&quot;</span></p></li><li><p><code>AF_PACKET</code><span>: &quot;packet&quot;</span></p></li></ul><h3 id='signals'><span>Signals</span></h3><ul><li><p><code>SIGHUP</code><span>: &quot;sighup&quot;</span></p></li><li><p><code>SIGINT</code><span>: &quot;sigint&quot;</span></p></li><li><p><code>SIGQUIT</code><span>: &quot;sigquit&quot;</span></p></li><li><p><code>SIGILL</code><span>: &quot;sigill&quot;</span></p></li><li><p><code>SIGTRAP</code><span>: &quot;sigtrap&quot;</span></p></li><li><p><code>SIGABRT</code><span>: &quot;sigabrt&quot;</span></p></li><li><p><code>SIGIOT</code><span>: &quot;sigiot&quot;</span></p></li><li><p><code>SIGBUS</code><span>: &quot;sigbus&quot;</span></p></li><li><p><code>SIGFPE</code><span>: &quot;sigfpe&quot;</span></p></li><li><p><code>SIGKILL</code><span>: &quot;sigkill&quot;</span></p></li><li><p><code>SIGUSR1</code><span>: &quot;sigusr1&quot;</span></p></li><li><p><code>SIGSEGV</code><span>: &quot;sigsegv&quot;</span></p></li><li><p><code>SIGUSR2</code><span>: &quot;sigusr2&quot;</span></p></li><li><p><code>SIGPIPE</code><span>: &quot;sigpipe&quot;</span></p></li><li><p><code>SIGALRM</code><span>: &quot;sigalrm&quot;</span></p></li><li><p><code>SIGTERM</code><span>: &quot;sigterm&quot;</span></p></li><li><p><code>SIGCHLD</code><span>: &quot;sigchld&quot;</span></p></li><li><p><code>SIGSTKFLT</code><span>: &quot;sigstkflt&quot;</span></p></li><li><p><code>SIGCONT</code><span>: &quot;sigcont&quot;</span></p></li><li><p><code>SIGSTOP</code><span>: &quot;sigstop&quot;</span></p></li><li><p><code>SIGTSTP</code><span>: &quot;sigtstp&quot;</span></p></li><li><p><code>SIGBREAK</code><span>: &quot;sigbreak&quot;</span></p></li><li><p><code>SIGTTIN</code><span>: &quot;sigttin&quot;</span></p></li><li><p><code>SIGTTOU</code><span>: &quot;sigttou&quot;</span></p></li><li><p><code>SIGURG</code><span>: &quot;sigurg&quot;</span></p></li><li><p><code>SIGXCPU</code><span>: &quot;sigxcpu&quot;</span></p></li><li><p><code>SIGXFSZ</code><span>: &quot;sigxfsz&quot;</span></p></li><li><p><code>SIGVTALRM</code><span>: &quot;sigvtalrm&quot;</span></p></li><li><p><code>SIGPROF</code><span>: &quot;sigprof&quot;</span></p></li><li><p><code>SIGWINCH</code><span>: &quot;sigwinch&quot;</span></p></li><li><p><code>SIGIO</code><span>: &quot;sigio&quot;</span></p></li><li><p><code>SIGPOLL</code><span>: &quot;sigpoll&quot;</span></p></li><li><p><code>SIGLOST</code><span>: &quot;siglost&quot;</span></p></li><li><p><code>SIGPWR</code><span>: &quot;sigpwr&quot;</span></p></li><li><p><code>SIGSYS</code><span>: &quot;sigsys&quot;</span></p></li></ul><h3 id='socket-types'><span>Socket Types</span></h3><ul><li><p><code>SOCK_STREAM</code><span>: &quot;stream&quot;</span></p></li><li><p><code>SOCK_DGRAM</code><span>: &quot;dgram&quot;</span></p></li><li><p><code>SOCK_SEQPACKET</code><span>: &quot;seqpacket&quot;</span></p></li><li><p><code>SOCK_RAW</code><span>: &quot;raw&quot;</span></p></li><li><p><code>SOCK_RDM</code><span>: &quot;rdm&quot;</span></p></li></ul><h3 id='tty-modes'><span>TTY Modes</span></h3><ul><li><p><code>TTY_MODE_NORMAL</code><span>: &quot;normal&quot;</span></p></li><li><p><code>TTY_MODE_RAW</code><span>: &quot;raw&quot;</span></p></li><li><p><code>TTY_MODE_IO</code><span>: &quot;io&quot;</span></p></li></ul><h2 id='error-handling'><span>Error Handling</span></h2><p><span>In libuv, errors are represented by negative numbered constants. While these</span>
<span>constants are made available in the </span><code>uv.errno</code><span> table, they are not returned by</span>
<span>luv functions and the libuv functions used to handle them are not exposed.</span>
<span>Instead, if an internal error is encountered, the failing luv function will</span>
<span>return to the caller an assertable </span><code>nil, err, name</code><span> tuple:</span></p><ul><li><p><code>nil</code><span> idiomatically indicates failure</span></p></li><li><p><code>err</code><span> is a string with the format </span><code>{name}: {message}</code></p><ul><li><p><code>{name}</code><span> is the error name provided internally by </span><code>uv_err_name</code></p></li><li><p><code>{message}</code><span> is a human-readable message provided internally by </span><code>uv_strerror</code></p></li></ul></li><li><p><code>name</code><span> is the same string used to construct </span><code>err</code></p></li></ul><p><span>This tuple is referred to below as the </span><code>fail</code><span> pseudo-type.</span></p><p><span>When a function is called successfully, it will return either a value that is</span>
<span>relevant to the operation of the function, or the integer </span><code>0</code><span> to indicate</span>
<span>success, or sometimes nothing at all. These cases are documented below.</span></p><p><span>Below is a list of known error names and error strings. See libuv&#39;s</span>
<a href='https://docs.libuv.org/en/v1.x/errors.html#error-constants' target='_blank'><span>error constants</span></a><span> page for an original source.</span></p><ul><li><p><code>E2BIG</code><span>: argument list too long.</span></p></li><li><p><code>EACCES</code><span>: permission denied.</span></p></li><li><p><code>EADDRINUSE</code><span>: address already in use.</span></p></li><li><p><code>EADDRNOTAVAIL</code><span>: address not available.</span></p></li><li><p><code>EAFNOSUPPORT</code><span>: address family not supported.</span></p></li><li><p><code>EAGAIN</code><span>: resource temporarily unavailable.</span></p></li><li><p><code>EAI_ADDRFAMILY</code><span>: address family not supported.</span></p></li><li><p><code>EAI_AGAIN</code><span>: temporary failure.</span></p></li><li><p><code>EAI_BADFLAGS</code><span>: bad ai_flags value.</span></p></li><li><p><code>EAI_BADHINTS</code><span>: invalid value for hints.</span></p></li><li><p><code>EAI_CANCELED</code><span>: request canceled.</span></p></li><li><p><code>EAI_FAIL</code><span>: permanent failure.</span></p></li><li><p><code>EAI_FAMILY</code><span>: ai_family not supported.</span></p></li><li><p><code>EAI_MEMORY</code><span>: out of memory.</span></p></li><li><p><code>EAI_NODATA</code><span>: no address.</span></p></li><li><p><code>EAI_NONAME</code><span>: unknown node or service.</span></p></li><li><p><code>EAI_OVERFLOW</code><span>: argument buffer overflow.</span></p></li><li><p><code>EAI_PROTOCOL</code><span>: resolved protocol is unknown.</span></p></li><li><p><code>EAI_SERVICE</code><span>: service not available for socket type.</span></p></li><li><p><code>EAI_SOCKTYPE</code><span>: socket type not supported.</span></p></li><li><p><code>EALREADY</code><span>: connection already in progress.</span></p></li><li><p><code>EBADF</code><span>: bad file descriptor.</span></p></li><li><p><code>EBUSY</code><span>: resource busy or locked.</span></p></li><li><p><code>ECANCELED</code><span>: operation canceled.</span></p></li><li><p><code>ECHARSET</code><span>: invalid Unicode character.</span></p></li><li><p><code>ECONNABORTED</code><span>: software caused connection abort.</span></p></li><li><p><code>ECONNREFUSED</code><span>: connection refused.</span></p></li><li><p><code>ECONNRESET</code><span>: connection reset by peer.</span></p></li><li><p><code>EDESTADDRREQ</code><span>: destination address required.</span></p></li><li><p><code>EEXIST</code><span>: file already exists.</span></p></li><li><p><code>EFAULT</code><span>: bad address in system call argument.</span></p></li><li><p><code>EFBIG</code><span>: file too large.</span></p></li><li><p><code>EHOSTUNREACH</code><span>: host is unreachable.</span></p></li><li><p><code>EINTR</code><span>: interrupted system call.</span></p></li><li><p><code>EINVAL</code><span>: invalid argument.</span></p></li><li><p><code>EIO</code><span>: i/o error.</span></p></li><li><p><code>EISCONN</code><span>: socket is already connected.</span></p></li><li><p><code>EISDIR</code><span>: illegal operation on a directory.</span></p></li><li><p><code>ELOOP</code><span>: too many symbolic links encountered.</span></p></li><li><p><code>EMFILE</code><span>: too many open files.</span></p></li><li><p><code>EMSGSIZE</code><span>: message too long.</span></p></li><li><p><code>ENAMETOOLONG</code><span>: name too long.</span></p></li><li><p><code>ENETDOWN</code><span>: network is down.</span></p></li><li><p><code>ENETUNREACH</code><span>: network is unreachable.</span></p></li><li><p><code>ENFILE</code><span>: file table overflow.</span></p></li><li><p><code>ENOBUFS</code><span>: no buffer space available.</span></p></li><li><p><code>ENODEV</code><span>: no such device.</span></p></li><li><p><code>ENOENT</code><span>: no such file or directory.</span></p></li><li><p><code>ENOMEM</code><span>: not enough memory.</span></p></li><li><p><code>ENONET</code><span>: machine is not on the network.</span></p></li><li><p><code>ENOPROTOOPT</code><span>: protocol not available.</span></p></li><li><p><code>ENOSPC</code><span>: no space left on device.</span></p></li><li><p><code>ENOSYS</code><span>: function not implemented.</span></p></li><li><p><code>ENOTCONN</code><span>: socket is not connected.</span></p></li><li><p><code>ENOTDIR</code><span>: not a directory.</span></p></li><li><p><code>ENOTEMPTY</code><span>: directory not empty.</span></p></li><li><p><code>ENOTSOCK</code><span>: socket operation on non-socket.</span></p></li><li><p><code>ENOTSUP</code><span>: operation not supported on socket.</span></p></li><li><p><code>EOVERFLOW</code><span>: value too large for defined data type.</span></p></li><li><p><code>EPERM</code><span>: operation not permitted.</span></p></li><li><p><code>EPIPE</code><span>: broken pipe.</span></p></li><li><p><code>EPROTO</code><span>: protocol error.</span></p></li><li><p><code>EPROTONOSUPPORT</code><span>: protocol not supported.</span></p></li><li><p><code>EPROTOTYPE</code><span>: protocol wrong type for socket.</span></p></li><li><p><code>ERANGE</code><span>: result too large.</span></p></li><li><p><code>EROFS</code><span>: read-only file system.</span></p></li><li><p><code>ESHUTDOWN</code><span>: cannot send after transport endpoint shutdown.</span></p></li><li><p><code>ESPIPE</code><span>: invalid seek.</span></p></li><li><p><code>ESRCH</code><span>: no such process.</span></p></li><li><p><code>ETIMEDOUT</code><span>: connection timed out.</span></p></li><li><p><code>ETXTBSY</code><span>: text file is busy.</span></p></li><li><p><code>EXDEV</code><span>: cross-device link not permitted.</span></p></li><li><p><code>UNKNOWN</code><span>: unknown error.</span></p></li><li><p><code>EOF</code><span>: end of file.</span></p></li><li><p><code>ENXIO</code><span>: no such device or address.</span></p></li><li><p><code>EMLINK</code><span>: too many links.</span></p></li><li><p><code>ENOTTY</code><span>: inappropriate ioctl for device.</span></p></li><li><p><code>EFTYPE</code><span>: inappropriate file type or format.</span></p></li><li><p><code>EILSEQ</code><span>: illegal byte sequence.</span></p></li><li><p><code>ESOCKTNOSUPPORT</code><span>: socket type not supported.</span></p></li></ul><h2 id='version-checking'><span>Version Checking</span></h2><h3 id='uvversion'><code>uv.version()</code></h3><p><span>Returns the libuv version packed into a single integer. 8 bits are used for each</span>
<span>component, with the patch number stored in the 8 least significant bits. For</span>
<span>example, this would be 0x010203 in libuv 1.2.3.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer</code></p><h3 id='uvversionstring'><code>uv.version_string()</code></h3><p><span>Returns the libuv version number as a string. For example, this would be &quot;1.2.3&quot;</span>
<span>in libuv 1.2.3. For non-release versions, the version suffix is included.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>string</code></p><h2 id='uvloopt-----event-loop'><code>uv_loop_t</code><span> — Event loop</span></h2><p><span>The event loop is the central part of libuv&#39;s functionality. It takes care of</span>
<span>polling for I/O and scheduling callbacks to be run based on different sources of</span>
<span>events.</span></p><p><span>In luv, there is an implicit uv loop for every Lua state that loads the library.</span>
<span>You can use this library in an multi-threaded environment as long as each thread</span>
<span>has it&#39;s own Lua state with its corresponding own uv loop. This loop is not</span>
<span>directly exposed to users in the Lua module.</span></p><h3 id='uvloopclose'><code>uv.loop_close()</code></h3><p><span>Closes all internal loop resources. In normal execution, the loop will</span>
<span>automatically be closed when it is garbage collected by Lua, so it is not</span>
<span>necessary to explicitly call </span><code>loop_close()</code><span>. Call this function only after the</span>
<span>loop has finished executing and all open handles and requests have been closed,</span>
<span>or it will return </span><code>EBUSY</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvrunmode'><code>uv.run([mode])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>mode</code><span>: </span><code>string</code><span> or </span><code>nil</code><span> (default: </span><code>&quot;default&quot;</code><span>)</span></p></li></ul><p><span>This function runs the event loop. It will act differently depending on the</span>
<span>specified mode:</span></p><ul><li><p><code>&quot;default&quot;</code><span>: Runs the event loop until there are no more active and</span>
<span>referenced handles or requests. Returns </span><code>true</code><span> if </span><code>uv.stop()</code><span> was called and</span>
<span>  there are still active handles or requests. Returns </span><code>false</code><span> in all other</span>
<span>  cases.</span></p></li><li><p><code>&quot;once&quot;</code><span>: Poll for I/O once. Note that this function blocks if there are no</span>
<span>pending callbacks. Returns </span><code>false</code><span> when done (no active handles or requests</span>
<span>  left), or </span><code>true</code><span> if more callbacks are expected (meaning you should run the</span>
<span>  event loop again sometime in the future).</span></p></li><li><p><code>&quot;nowait&quot;</code><span>: Poll for I/O once but don&#39;t block if there are no pending</span>
<span>callbacks. Returns </span><code>false</code><span> if done (no active handles or requests left),</span>
<span>  or </span><code>true</code><span> if more callbacks are expected (meaning you should run the event</span>
<span>  loop again sometime in the future).</span></p></li></ul><p><strong><span>Returns:</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Note:</span></strong><span> Luvit will implicitly call </span><code>uv.run()</code><span> after loading user code, but if</span>
<span>you use the luv bindings directly, you need to call this after registering</span>
<span>your initial set of event callbacks to start the event loop.</span></p><h3 id='uvloopconfigureoption-'><code>uv.loop_configure(option, ...)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>option</code><span>: </span><code>string</code></p></li><li><p><code>...</code><span>: depends on </span><code>option</code><span>, see below</span></p></li></ul><p><span>Set additional loop options. You should normally call this before the first call</span>
<span>to uv_run() unless mentioned otherwise.</span></p><p><span>Supported options:</span></p><ul><li><p><code>&quot;block_signal&quot;</code><span>: Block a signal when polling for new events. The second argument</span>
<span>to loop_configure() is the signal name (as a lowercase string) or the signal number.</span>
<span>  This operation is currently only implemented for </span><code>&quot;sigprof&quot;</code><span> signals, to suppress</span>
<span>  unnecessary wakeups when using a sampling profiler. Requesting other signals will</span>
<span>  fail with </span><code>EINVAL</code><span>.</span></p></li><li><p><code>&quot;metrics_idle_time&quot;</code><span>: Accumulate the amount of idle time the event loop spends</span>
<span>in the event provider. This option is necessary to use </span><code>metrics_idle_time()</code><span>.</span></p></li></ul><p><span>An example of a valid call to this function is:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">uv.loop_configure</span>(<span class="cm-string">"block_signal"</span>, <span class="cm-string">"sigprof"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><p><strong><span>Note:</span></strong><span> Be prepared to handle the </span><code>ENOSYS</code><span> error; it means the loop option is</span>
<span>not supported by the platform.</span></p><h3 id='uvloopmode'><code>uv.loop_mode()</code></h3><p><span>If the loop is running, returns a string indicating the mode in use. If the loop</span>
<span>is not running, </span><code>nil</code><span> is returned instead.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>string</code><span> or </span><code>nil</code></p><h3 id='uvloopalive'><code>uv.loop_alive()</code></h3><p><span>Returns </span><code>true</code><span> if there are referenced active handles, active requests, or</span>
<span>closing handles in the loop; otherwise, </span><code>false</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><h3 id='uvstop'><code>uv.stop()</code></h3><p><span>Stop the event loop, causing </span><code>uv.run()</code><span> to end as soon as possible. This</span>
<span>will happen not sooner than the next loop iteration. If this function was called</span>
<span>before blocking for I/O, the loop won&#39;t block for I/O on this iteration.</span></p><p><strong><span>Returns:</span></strong><span> Nothing.</span></p><h3 id='uvbackendfd'><code>uv.backend_fd()</code></h3><p><span>Get backend file descriptor. Only kqueue, epoll, and event ports are supported.</span></p><p><span>This can be used in conjunction with </span><code>uv.run(&quot;nowait&quot;)</code><span> to poll in one thread</span>
<span>and run the event loop&#39;s callbacks in another</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer</code><span> or </span><code>nil</code></p><p><strong><span>Note</span></strong><span>: Embedding a kqueue fd in another kqueue pollset doesn&#39;t work on all</span>
<span>platforms. It&#39;s not an error to add the fd but it never generates events.</span></p><h3 id='uvbackendtimeout'><code>uv.backend_timeout()</code></h3><p><span>Get the poll timeout. The return value is in milliseconds, or -1 for no timeout.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer</code></p><h3 id='uvnow'><code>uv.now()</code></h3><p><span>Returns the current timestamp in milliseconds. The timestamp is cached at the</span>
<span>start of the event loop tick, see </span><code>uv.update_time()</code><span> for details and rationale.</span></p><p><span>The timestamp increases monotonically from some arbitrary point in time. Don&#39;t</span>
<span>make assumptions about the starting point, you will only get disappointed.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer</code></p><p><strong><span>Note</span></strong><span>: Use </span><code>uv.hrtime()</code><span> if you need sub-millisecond granularity.</span></p><h3 id='uvupdatetime'><code>uv.update_time()</code></h3><p><span>Update the event loop&#39;s concept of &quot;now&quot;. Libuv caches the current time at the</span>
<span>start of the event loop tick in order to reduce the number of time-related</span>
<span>system calls.</span></p><p><span>You won&#39;t normally need to call this function unless you have callbacks that</span>
<span>block the event loop for longer periods of time, where &quot;longer&quot; is somewhat</span>
<span>subjective but probably on the order of a millisecond or more.</span></p><p><strong><span>Returns:</span></strong><span> Nothing.</span></p><h3 id='uvwalkcallback'><code>uv.walk(callback)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>callback</code><span>: </span><code>callable</code></p><ul><li><p><code>handle</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_handle_t</code></p></li></ul></li></ul><p><span>Walk the list of handles: </span><code>callback</code><span> will be executed with each handle.</span></p><p><strong><span>Returns:</span></strong><span> Nothing.</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- Example usage of uv.walk to close all handles that aren't already closing.</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">uv.walk</span>(<span class="cm-keyword">function</span> (<span class="cm-variable">handle</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">if</span> <span class="cm-keyword">not</span> <span class="cm-variable">handle</span>:<span class="cm-variable">is_closing</span>() <span class="cm-keyword">then</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">handle</span>:<span class="cm-builtin">close</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 138px;"></div><div class="CodeMirror-gutters" style="display: none; height: 138px;"></div></div></div></pre><h2 id='uvreqt-----base-request'><code>uv_req_t</code><span> — Base request</span></h2><p><code>uv_req_t</code><span> is the base type for all libuv request types.</span></p><h3 id='uvcancelreq'><code>uv.cancel(req)</code></h3><blockquote><p><span>method form </span><code>req:cancel()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>req</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_req_t</code></p></li></ul><p><span>Cancel a pending request. Fails if the request is executing or has finished</span>
<span>executing. Only cancellation of </span><code>uv_fs_t</code><span>, </span><code>uv_getaddrinfo_t</code><span>,</span>
<code>uv_getnameinfo_t</code><span> and </span><code>uv_work_t</code><span> requests is currently supported.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvreqgettypereq'><code>uv.req_get_type(req)</code></h3><blockquote><p><span>method form </span><code>req:get_type()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>req</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_req_t</code></p></li></ul><p><span>Returns the name of the struct for a given request (e.g. </span><code>&quot;fs&quot;</code><span> for </span><code>uv_fs_t</code><span>)</span>
<span>and the libuv enum integer for the request&#39;s type (</span><code>uv_req_type</code><span>).</span></p><p><strong><span>Returns:</span></strong><span> </span><code>string, integer</code></p><h2 id='uvhandlet-----base-handle'><code>uv_handle_t</code><span> — Base handle</span></h2><p><code>uv_handle_t</code><span> is the base type for all libuv handle types. All API functions</span>
<span>defined here work with any handle type.</span></p><h3 id='uvisactivehandle'><code>uv.is_active(handle)</code></h3><blockquote><p><span>method form </span><code>handle:is_active()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>handle</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_handle_t</code></p></li></ul><p><span>Returns </span><code>true</code><span> if the handle is active, </span><code>false</code><span> if it&#39;s inactive. What &quot;active”</span>
<span>means depends on the type of handle:</span></p><ul><li><p><span>A </span><a href='#uv_async_t--async-handle' target='_blank'><code>uv_async_t</code></a><span> handle is always active and cannot be deactivated, except</span>
<span>by closing it with </span><code>uv.close()</code><span>.</span></p></li><li><p><span>A </span><a href='#uv_pipe_t--pipe-handle' target='_blank'><code>uv_pipe_t</code></a><span>, </span><a href='#uv_tcp_t--tcp-handle' target='_blank'><code>uv_tcp_t</code></a><span>, </span><a href='#uv_udp_t--udp-handle' target='_blank'><code>uv_udp_t</code></a><span>, etc. handle - basically</span>
<span>any handle that deals with I/O - is active when it is doing something that</span>
<span>  involves I/O, like reading, writing, connecting, accepting new connections,</span>
<span>  etc.</span></p></li><li><p><span>A </span><a href='#uv_check_t--check-handle' target='_blank'><code>uv_check_t</code></a><span>, </span><a href='#uv_idle_t--idle-handle' target='_blank'><code>uv_idle_t</code></a><span>, </span><a href='#uv_timer_t--timer-handle' target='_blank'><code>uv_timer_t</code></a><span>, etc. handle is active</span>
<span>when it has been started with a call to </span><code>uv.check_start()</code><span>, </span><code>uv.idle_start()</code><span>,</span>
<span>  </span><code>uv.timer_start()</code><span> etc. until it has been stopped with a call to its</span>
<span>  respective stop function.</span></p></li></ul><p><strong><span>Returns:</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><h3 id='uvisclosinghandle'><code>uv.is_closing(handle)</code></h3><blockquote><p><span>method form </span><code>handle:is_closing()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>handle</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_handle_t</code></p></li></ul><p><span>Returns </span><code>true</code><span> if the handle is closing or closed, </span><code>false</code><span> otherwise.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Note</span></strong><span>: This function should only be used between the initialization of the</span>
<span>handle and the arrival of the close callback.</span></p><h3 id='uvclosehandle-callback'><code>uv.close(handle, [callback])</code></h3><blockquote><p><span>method form </span><code>handle:close([callback])</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>handle</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_handle_t</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> or </span><code>nil</code></p></li></ul><p><span>Request handle to be closed. </span><code>callback</code><span> will be called asynchronously after this</span>
<span>call. This MUST be called on each handle before memory is released.</span></p><p><span>Handles that wrap file descriptors are closed immediately but </span><code>callback</code><span> will</span>
<span>still be deferred to the next iteration of the event loop. It gives you a chance</span>
<span>to free up any resources associated with the handle.</span></p><p><span>In-progress requests, like </span><code>uv_connect_t</code><span> or </span><code>uv_write_t</code><span>, are cancelled and</span>
<span>have their callbacks called asynchronously with </span><code>ECANCELED</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> Nothing.</span></p><h3 id='uvrefhandle'><code>uv.ref(handle)</code></h3><blockquote><p><span>method form </span><code>handle:ref()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>handle</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_handle_t</code></p></li></ul><p><span>Reference the given handle. References are idempotent, that is, if a handle is</span>
<span>already referenced calling this function again will have no effect.</span></p><p><strong><span>Returns:</span></strong><span> Nothing.</span></p><p><span>See </span><a href='#reference-counting' target='_blank'><span>Reference counting</span></a><span>.</span></p><h3 id='uvunrefhandle'><code>uv.unref(handle)</code></h3><blockquote><p><span>method form </span><code>handle:unref()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>handle</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_handle_t</code></p></li></ul><p><span>Un-reference the given handle. References are idempotent, that is, if a handle</span>
<span>is not referenced calling this function again will have no effect.</span></p><p><strong><span>Returns:</span></strong><span> Nothing.</span></p><p><span>See </span><a href='#reference-counting' target='_blank'><span>Reference counting</span></a><span>.</span></p><h3 id='uvhasrefhandle'><code>uv.has_ref(handle)</code></h3><blockquote><p><span>method form </span><code>handle:has_ref()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>handle</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_handle_t</code></p></li></ul><p><span>Returns </span><code>true</code><span> if the handle referenced, </span><code>false</code><span> if not.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><span>See </span><a href='#reference-counting' target='_blank'><span>Reference counting</span></a><span>.</span></p><h3 id='uvsendbuffersizehandle-size'><code>uv.send_buffer_size(handle, [size])</code></h3><blockquote><p><span>method form </span><code>handle:send_buffer_size([size])</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>handle</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_handle_t</code></p></li><li><p><code>size</code><span>: </span><code>integer</code><span> or </span><code>nil</code><span> (default: </span><code>0</code><span>)</span></p></li></ul><p><span>Gets or sets the size of the send buffer that the operating system uses for the</span>
<span>socket.</span></p><p><span>If </span><code>size</code><span> is omitted (or </span><code>0</code><span>), this will return the current send buffer size; otherwise, this will use </span><code>size</code><span> to set the new send buffer size.</span></p><p><span>This function works for TCP, pipe and UDP handles on Unix and for TCP and UDP</span>
<span>handles on Windows.</span></p><p><strong><span>Returns:</span></strong></p><ul><li><p><code>integer</code><span> or </span><code>fail</code><span> (if </span><code>size</code><span> is </span><code>nil</code><span> or </span><code>0</code><span>)</span></p></li><li><p><code>0</code><span> or </span><code>fail</code><span> (if </span><code>size</code><span> is not </span><code>nil</code><span> and not </span><code>0</code><span>)</span></p></li></ul><p><strong><span>Note</span></strong><span>: Linux will set double the size and return double the size of the</span>
<span>original set value.</span></p><h3 id='uvrecvbuffersizehandle-size'><code>uv.recv_buffer_size(handle, [size])</code></h3><blockquote><p><span>method form </span><code>handle:recv_buffer_size([size])</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>handle</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_handle_t</code></p></li><li><p><code>size</code><span>: </span><code>integer</code><span> or </span><code>nil</code><span> (default: </span><code>0</code><span>)</span></p></li></ul><p><span>Gets or sets the size of the receive buffer that the operating system uses for</span>
<span>the socket.</span></p><p><span>If </span><code>size</code><span> is omitted (or </span><code>0</code><span>), this will return the current send buffer size; otherwise, this will use </span><code>size</code><span> to set the new send buffer size.</span></p><p><span>This function works for TCP, pipe and UDP handles on Unix and for TCP and UDP</span>
<span>handles on Windows.</span></p><p><strong><span>Returns:</span></strong></p><ul><li><p><code>integer</code><span> or </span><code>fail</code><span> (if </span><code>size</code><span> is </span><code>nil</code><span> or </span><code>0</code><span>)</span></p></li><li><p><code>0</code><span> or </span><code>fail</code><span> (if </span><code>size</code><span> is not </span><code>nil</code><span> and not </span><code>0</code><span>)</span></p></li></ul><p><strong><span>Note</span></strong><span>: Linux will set double the size and return double the size of the</span>
<span>original set value.</span></p><h3 id='uvfilenohandle'><code>uv.fileno(handle)</code></h3><blockquote><p><span>method form </span><code>handle:fileno()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>handle</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_handle_t</code></p></li></ul><p><span>Gets the platform dependent file descriptor equivalent.</span></p><p><span>The following handles are supported: TCP, pipes, TTY, UDP and poll. Passing any</span>
<span>other handle type will fail with </span><code>EINVAL</code><span>.</span></p><p><span>If a handle doesn&#39;t have an attached file descriptor yet or the handle itself</span>
<span>has been closed, this function will return </span><code>EBADF</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer</code><span> or </span><code>fail</code></p><p><strong><span>Warning</span></strong><span>: Be very careful when using this function. libuv assumes it&#39;s in</span>
<span>control of the file descriptor so any change to it may lead to malfunction.</span></p><h3 id='uvhandlegettypehandle'><code>uv.handle_get_type(handle)</code></h3><blockquote><p><span>method form </span><code>handle:get_type()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>handle</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_handle_t</code></p></li></ul><p><span>Returns the name of the struct for a given handle (e.g. </span><code>&quot;pipe&quot;</code><span> for </span><code>uv_pipe_t</code><span>)</span>
<span>and the libuv enum integer for the handle&#39;s type (</span><code>uv_handle_type</code><span>).</span></p><p><strong><span>Returns:</span></strong><span> </span><code>string, integer</code></p><h2 id='reference-counting'><span>Reference counting</span></h2><p><span>The libuv event loop (if run in the default mode) will run until there are no</span>
<span>active and referenced handles left. The user can force the loop to exit early by</span>
<span>unreferencing handles which are active, for example by calling </span><code>uv.unref()</code>
<span>after calling </span><code>uv.timer_start()</code><span>.</span></p><p><span>A handle can be referenced or unreferenced, the refcounting scheme doesn&#39;t use a</span>
<span>counter, so both operations are idempotent.</span></p><p><span>All handles are referenced when active by default, see </span><code>uv.is_active()</code><span> for a</span>
<span>more detailed explanation on what being active involves.</span></p><h2 id='uvtimert-----timer-handle'><code>uv_timer_t</code><span> — Timer handle</span></h2><blockquote><p><a href='#uv_handle_t--base-handle' target='_blank'><code>uv_handle_t</code></a><span> functions also apply.</span></p></blockquote><p><span>Timer handles are used to schedule callbacks to be called in the future.</span></p><h3 id='uvnewtimer'><code>uv.new_timer()</code></h3><p><span>Creates and initializes a new </span><code>uv_timer_t</code><span>. Returns the Lua userdata wrapping</span>
<span>it.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_timer_t userdata</code><span> or </span><code>fail</code></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- Creating a simple setTimeout wrapper</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-keyword">function</span> <span class="cm-variable">setTimeout</span>(<span class="cm-variable">timeout</span>, <span class="cm-variable">callback</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">local</span> <span class="cm-variable">timer</span> = <span class="cm-variable">uv.new_timer</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">timer</span>:<span class="cm-variable">start</span>(<span class="cm-variable">timeout</span>, <span class="cm-number">0</span>, <span class="cm-keyword">function</span> ()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">timer</span>:<span class="cm-variable">stop</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">timer</span>:<span class="cm-builtin">close</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">callback</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">end</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">timer</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- Creating a simple setInterval wrapper</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-keyword">function</span> <span class="cm-variable">setInterval</span>(<span class="cm-variable">interval</span>, <span class="cm-variable">callback</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">local</span> <span class="cm-variable">timer</span> = <span class="cm-variable">uv.new_timer</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">timer</span>:<span class="cm-variable">start</span>(<span class="cm-variable">interval</span>, <span class="cm-variable">interval</span>, <span class="cm-keyword">function</span> ()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">callback</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">end</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">timer</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- And clearInterval</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-keyword">function</span> <span class="cm-variable">clearInterval</span>(<span class="cm-variable">timer</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">timer</span>:<span class="cm-variable">stop</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">timer</span>:<span class="cm-builtin">close</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 576px;"></div><div class="CodeMirror-gutters" style="display: none; height: 576px;"></div></div></div></pre><h3 id='uvtimerstarttimer-timeout-repeat-callback'><code>uv.timer_start(timer, timeout, repeat, callback)</code></h3><blockquote><p><span>method form </span><code>timer:start(timeout, repeat, callback)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>timer</code><span>: </span><code>uv_timer_t userdata</code></p></li><li><p><code>timeout</code><span>: </span><code>integer</code></p></li><li><p><code>repeat</code><span>: </span><code>integer</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code></p></li></ul><p><span>Start the timer. </span><code>timeout</code><span> and </span><code>repeat</code><span> are in milliseconds.</span></p><p><span>If </span><code>timeout</code><span> is zero, the callback fires on the next event loop iteration. If</span>
<code>repeat</code><span> is non-zero, the callback fires first after </span><code>timeout</code><span> milliseconds and</span>
<span>then repeatedly after </span><code>repeat</code><span> milliseconds.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvtimerstoptimer'><code>uv.timer_stop(timer)</code></h3><blockquote><p><span>method form </span><code>timer:stop()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>timer</code><span>: </span><code>uv_timer_t userdata</code></p></li></ul><p><span>Stop the timer, the callback will not be called anymore.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvtimeragaintimer'><code>uv.timer_again(timer)</code></h3><blockquote><p><span>method form </span><code>timer:again()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>timer</code><span>: </span><code>uv_timer_t userdata</code></p></li></ul><p><span>Stop the timer, and if it is repeating restart it using the repeat value as the</span>
<span>timeout. If the timer has never been started before it raises </span><code>EINVAL</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvtimersetrepeattimer-repeat'><code>uv.timer_set_repeat(timer, repeat)</code></h3><blockquote><p><span>method form </span><code>timer:set_repeat(repeat)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>timer</code><span>: </span><code>uv_timer_t userdata</code></p></li><li><p><code>repeat</code><span>: </span><code>integer</code></p></li></ul><p><span>Set the repeat interval value in milliseconds. The timer will be scheduled to</span>
<span>run on the given interval, regardless of the callback execution duration, and</span>
<span>will follow normal timer semantics in the case of a time-slice overrun.</span></p><p><span>For example, if a 50 ms repeating timer first runs for 17 ms, it will be</span>
<span>scheduled to run again 33 ms later. If other tasks consume more than the 33 ms</span>
<span>following the first timer callback, then the callback will run as soon as</span>
<span>possible.</span></p><p><strong><span>Returns:</span></strong><span> Nothing.</span></p><h3 id='uvtimergetrepeattimer'><code>uv.timer_get_repeat(timer)</code></h3><blockquote><p><span>method form </span><code>timer:get_repeat()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>timer</code><span>: </span><code>uv_timer_t userdata</code></p></li></ul><p><span>Get the timer repeat value.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer</code></p><h3 id='uvtimergetdueintimer'><code>uv.timer_get_due_in(timer)</code></h3><blockquote><p><span>method form </span><code>timer:get_due_in()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>timer</code><span>: </span><code>uv_timer_t userdata</code></p></li></ul><p><span>Get the timer due value or 0 if it has expired. The time is relative to </span><code>uv.now()</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer</code></p><p><strong><span>Note</span></strong><span>: New in libuv version 1.40.0.</span></p><h2 id='uvpreparet-----prepare-handle'><code>uv_prepare_t</code><span> — Prepare handle</span></h2><blockquote><p><a href='#uv_handle_t--base-handle' target='_blank'><code>uv_handle_t</code></a><span> functions also apply.</span></p></blockquote><p><span>Prepare handles will run the given callback once per loop iteration, right</span>
<span>before polling for I/O.</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">prepare</span> = <span class="cm-variable">uv.new_prepare</span>()</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">prepare</span>:<span class="cm-variable">start</span>(<span class="cm-keyword">function</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">print</span>(<span class="cm-string">"Before I/O polling"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><h3 id='uvnewprepare'><code>uv.new_prepare()</code></h3><p><span>Creates and initializes a new </span><code>uv_prepare_t</code><span>. Returns the Lua userdata wrapping</span>
<span>it.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_prepare_t userdata</code></p><h3 id='uvpreparestartprepare-callback'><code>uv.prepare_start(prepare, callback)</code></h3><blockquote><p><span>method form </span><code>prepare:start(callback)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>prepare</code><span>: </span><code>uv_prepare_t userdata</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code></p></li></ul><p><span>Start the handle with the given callback.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvpreparestopprepare'><code>uv.prepare_stop(prepare)</code></h3><blockquote><p><span>method form </span><code>prepare:stop()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>prepare</code><span>: </span><code>uv_prepare_t userdata</code></p></li></ul><p><span>Stop the handle, the callback will no longer be called.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h2 id='uvcheckt-----check-handle'><code>uv_check_t</code><span> — Check handle</span></h2><blockquote><p><a href='#uv_handle_t--base-handle' target='_blank'><code>uv_handle_t</code></a><span> functions also apply.</span></p></blockquote><p><span>Check handles will run the given callback once per loop iteration, right after</span>
<span>polling for I/O.</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">check</span> = <span class="cm-variable">uv.new_check</span>()</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">check</span>:<span class="cm-variable">start</span>(<span class="cm-keyword">function</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">print</span>(<span class="cm-string">"After I/O polling"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><h3 id='uvnewcheck'><code>uv.new_check()</code></h3><p><span>Creates and initializes a new </span><code>uv_check_t</code><span>. Returns the Lua userdata wrapping</span>
<span>it.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_check_t userdata</code></p><h3 id='uvcheckstartcheck-callback'><code>uv.check_start(check, callback)</code></h3><blockquote><p><span>method form </span><code>check:start(callback)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>check</code><span>: </span><code>uv_check_t userdata</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code></p></li></ul><p><span>Start the handle with the given callback.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvcheckstopcheck'><code>uv.check_stop(check)</code></h3><blockquote><p><span>method form </span><code>check:stop()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>check</code><span>: </span><code>uv_check_t userdata</code></p></li></ul><p><span>Stop the handle, the callback will no longer be called.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h2 id='uvidlet-----idle-handle'><code>uv_idle_t</code><span> — Idle handle</span></h2><blockquote><p><a href='#uv_handle_t--base-handle' target='_blank'><code>uv_handle_t</code></a><span> functions also apply.</span></p></blockquote><p><span>Idle handles will run the given callback once per loop iteration, right before</span>
<span>the </span><a href='#uv_prepare_t--prepare-handle' target='_blank'><code>uv_prepare_t</code></a><span> handles.</span></p><p><strong><span>Note</span></strong><span>: The notable difference with prepare handles is that when there are</span>
<span>active idle handles, the loop will perform a zero timeout poll instead of</span>
<span>blocking for I/O.</span></p><p><strong><span>Warning</span></strong><span>: Despite the name, idle handles will get their callbacks called on</span>
<span>every loop iteration, not when the loop is actually &quot;idle&quot;.</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">idle</span> = <span class="cm-variable">uv.new_idle</span>()</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">idle</span>:<span class="cm-variable">start</span>(<span class="cm-keyword">function</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">print</span>(<span class="cm-string">"Before I/O polling, no blocking"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><h3 id='uvnewidle'><code>uv.new_idle()</code></h3><p><span>Creates and initializes a new </span><code>uv_idle_t</code><span>. Returns the Lua userdata wrapping</span>
<span>it.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_idle_t userdata</code></p><h3 id='uvidlestartidle-callback'><code>uv.idle_start(idle, callback)</code></h3><blockquote><p><span>method form </span><code>idle:start(callback)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>idle</code><span>: </span><code>uv_idle_t userdata</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code></p></li></ul><p><span>Start the handle with the given callback.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvidlestopcheck'><code>uv.idle_stop(check)</code></h3><blockquote><p><span>method form </span><code>idle:stop()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>idle</code><span>: </span><code>uv_idle_t userdata</code></p></li></ul><p><span>Stop the handle, the callback will no longer be called.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h2 id='uvasynct-----async-handle'><code>uv_async_t</code><span> — Async handle</span></h2><blockquote><p><a href='#uv_handle_t--base-handle' target='_blank'><code>uv_handle_t</code></a><span> functions also apply.</span></p></blockquote><p><span>Async handles allow the user to &quot;wakeup&quot; the event loop and get a callback</span>
<span>called from another thread.</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">async</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">async</span> = <span class="cm-variable">uv.new_async</span>(<span class="cm-keyword">function</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">print</span>(<span class="cm-string">"async operation ran"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">async</span>:<span class="cm-builtin">close</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">async</span>:<span class="cm-variable">send</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 161px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre><h3 id='uvnewasynccallback'><code>uv.new_async(callback)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>callback</code><span>: </span><code>callable</code></p><ul><li><p><code>...</code><span>: </span><code>threadargs</code><span> passed to/from </span><code>uv.async_send(async, ...)</code></p></li></ul></li></ul><p><span>Creates and initializes a new </span><code>uv_async_t</code><span>. Returns the Lua userdata wrapping</span>
<span>it.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_async_t userdata</code><span> or </span><code>fail</code></p><p><strong><span>Note</span></strong><span>: Unlike other handle initialization functions, this immediately starts</span>
<span>the handle.</span></p><h3 id='uvasyncsendasync-'><code>uv.async_send(async, ...)</code></h3><blockquote><p><span>method form </span><code>async:send(...)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>async</code><span>: </span><code>uv_async_t userdata</code></p></li><li><p><code>...</code><span>: </span><code>threadargs</code></p></li></ul><p><span>Wakeup the event loop and call the async handle&#39;s callback.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><p><strong><span>Note</span></strong><span>: It&#39;s safe to call this function from any thread. The callback will be</span>
<span>called on the loop thread.</span></p><p><strong><span>Warning</span></strong><span>: libuv will coalesce calls to </span><code>uv.async_send(async)</code><span>, that is, not</span>
<span>every call to it will yield an execution of the callback. For example: if</span>
<code>uv.async_send()</code><span> is called 5 times in a row before the callback is called, the</span>
<span>callback will only be called once. If </span><code>uv.async_send()</code><span> is called again after</span>
<span>the callback was called, it will be called again.</span></p><h2 id='uvpollt-----poll-handle'><code>uv_poll_t</code><span> — Poll handle</span></h2><blockquote><p><a href='#uv_handle_t--base-handle' target='_blank'><code>uv_handle_t</code></a><span> functions also apply.</span></p></blockquote><p><span>Poll handles are used to watch file descriptors for readability and writability,</span>
<span>similar to the purpose of </span><a href='http://linux.die.net/man/2/poll'><span>poll(2)</span></a><span>.</span></p><p><span>The purpose of poll handles is to enable integrating external libraries that</span>
<span>rely on the event loop to signal it about the socket status changes, like c-ares</span>
<span>or libssh2. Using </span><code>uv_poll_t</code><span> for any other purpose is not recommended;</span>
<code>uv_tcp_t</code><span>, </span><code>uv_udp_t</code><span>, etc. provide an implementation that is faster and more</span>
<span>scalable than what can be achieved with </span><code>uv_poll_t</code><span>, especially on Windows.</span></p><p><span>It is possible that poll handles occasionally signal that a file descriptor is</span>
<span>readable or writable even when it isn&#39;t. The user should therefore always be</span>
<span>prepared to handle EAGAIN or equivalent when it attempts to read from or write</span>
<span>to the fd.</span></p><p><span>It is not okay to have multiple active poll handles for the same socket, this</span>
<span>can cause libuv to busyloop or otherwise malfunction.</span></p><p><span>The user should not close a file descriptor while it is being polled by an</span>
<span>active poll handle. This can cause the handle to report an error, but it might</span>
<span>also start polling another socket. However the fd can be safely closed</span>
<span>immediately after a call to </span><code>uv.poll_stop()</code><span> or </span><code>uv.close()</code><span>.</span></p><p><strong><span>Note</span></strong><span>: On windows only sockets can be polled with poll handles. On Unix any</span>
<span>file descriptor that would be accepted by poll(2) can be used.</span></p><h3 id='uvnewpollfd'><code>uv.new_poll(fd)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>fd</code><span>: </span><code>integer</code></p></li></ul><p><span>Initialize the handle using a file descriptor.</span></p><p><span>The file descriptor is set to non-blocking mode.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_poll_t userdata</code><span> or </span><code>fail</code></p><h3 id='uvnewsocketpollfd'><code>uv.new_socket_poll(fd)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>fd</code><span>: </span><code>integer</code></p></li></ul><p><span>Initialize the handle using a socket descriptor. On Unix this is identical to</span>
<code>uv.new_poll()</code><span>. On windows it takes a SOCKET handle.</span></p><p><span>The socket is set to non-blocking mode.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_poll_t userdata</code><span> or </span><code>fail</code></p><h3 id='uvpollstartpoll-events-callback'><code>uv.poll_start(poll, events, callback)</code></h3><blockquote><p><span>method form </span><code>poll:start(events, callback)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>poll</code><span>: </span><code>uv_poll_t userdata</code></p></li><li><p><code>events</code><span>: </span><code>string</code><span> or </span><code>nil</code><span> (default: </span><code>&quot;rw&quot;</code><span>)</span></p></li><li><p><code>callback</code><span>: </span><code>callable</code></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>events</code><span>: </span><code>string</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Starts polling the file descriptor. </span><code>events</code><span> are: </span><code>&quot;r&quot;</code><span>, </span><code>&quot;w&quot;</code><span>, </span><code>&quot;rw&quot;</code><span>, </span><code>&quot;d&quot;</code><span>,</span>
<code>&quot;rd&quot;</code><span>, </span><code>&quot;wd&quot;</code><span>, </span><code>&quot;rwd&quot;</code><span>, </span><code>&quot;p&quot;</code><span>, </span><code>&quot;rp&quot;</code><span>, </span><code>&quot;wp&quot;</code><span>, </span><code>&quot;rwp&quot;</code><span>, </span><code>&quot;dp&quot;</code><span>, </span><code>&quot;rdp&quot;</code><span>,</span>
<code>&quot;wdp&quot;</code><span>, or </span><code>&quot;rwdp&quot;</code><span> where </span><code>r</code><span> is </span><code>READABLE</code><span>, </span><code>w</code><span> is </span><code>WRITABLE</code><span>, </span><code>d</code><span> is</span>
<code>DISCONNECT</code><span>, and </span><code>p</code><span> is </span><code>PRIORITIZED</code><span>. As soon as an event is detected</span>
<span>the callback will be called with status set to 0, and the detected events set on</span>
<span>the events field.</span></p><p><span>The user should not close the socket while the handle is active. If the user</span>
<span>does that anyway, the callback may be called reporting an error status, but this</span>
<span>is not guaranteed.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><p><strong><span>Note</span></strong><span> Calling </span><code>uv.poll_start()</code><span> on a handle that is already active is fine.</span>
<span>Doing so will update the events mask that is being watched for.</span></p><h3 id='uvpollstoppoll'><code>uv.poll_stop(poll)</code></h3><blockquote><p><span>method form </span><code>poll:stop()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>poll</code><span>: </span><code>uv_poll_t userdata</code></p></li></ul><p><span>Stop polling the file descriptor, the callback will no longer be called.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h2 id='uvsignalt-----signal-handle'><code>uv_signal_t</code><span> — Signal handle</span></h2><blockquote><p><a href='#uv_handle_t--base-handle' target='_blank'><code>uv_handle_t</code></a><span> functions also apply.</span></p></blockquote><p><span>Signal handles implement Unix style signal handling on a per-event loop bases.</span></p><p><strong><span>Windows Notes:</span></strong></p><p><span>Reception of some signals is emulated on Windows:</span></p><ul><li><p><span>SIGINT is normally delivered when the user presses CTRL+C. However, like on</span>
<span>Unix, it is not generated when terminal raw mode is enabled.</span></p></li><li><p><span>SIGBREAK is delivered when the user pressed CTRL + BREAK.</span></p></li><li><p><span>SIGHUP is generated when the user closes the console window. On SIGHUP the</span>
<span>program is given approximately 10 seconds to perform cleanup. After that</span>
<span>  Windows will unconditionally terminate it.</span></p></li><li><p><span>SIGWINCH is raised whenever libuv detects that the console has been resized.</span>
<span>SIGWINCH is emulated by libuv when the program uses a uv_tty_t handle to write</span>
<span>  to the console. SIGWINCH may not always be delivered in a timely manner; libuv</span>
<span>  will only detect size changes when the cursor is being moved. When a readable</span>
<span>  </span><a href='#uv_tty_t--tty-handle' target='_blank'><code>uv_tty_t</code></a><span> handle is used in raw mode, resizing the console buffer will</span>
<span>  also trigger a SIGWINCH signal.</span></p></li><li><p><span>Watchers for other signals can be successfully created, but these signals</span>
<span>are never received. These signals are: SIGILL, SIGABRT, SIGFPE, SIGSEGV,</span>
<span>  SIGTERM and SIGKILL.</span></p></li><li><p><span>Calls to raise() or abort() to programmatically raise a signal are not</span>
<span>detected by libuv; these will not trigger a signal watcher.</span></p></li></ul><p><strong><span>Unix Notes:</span></strong></p><ul><li><p><span>SIGKILL and SIGSTOP are impossible to catch.</span></p></li><li><p><span>Handling SIGBUS, SIGFPE, SIGILL or SIGSEGV via libuv results into undefined</span>
<span>behavior.</span></p></li><li><p><span>SIGABRT will not be caught by libuv if generated by abort(), e.g. through</span>
<span>assert().</span></p></li><li><p><span>On Linux SIGRT0 and SIGRT1 (signals 32 and 33) are used by the NPTL pthreads</span>
<span>library to manage threads. Installing watchers for those signals will lead to</span>
<span>  unpredictable behavior and is strongly discouraged. Future versions of libuv</span>
<span>  may simply reject them.</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- Create a new signal handler</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">signal</span> = <span class="cm-variable">uv.new_signal</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- Define a handler function</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">uv.signal_start</span>(<span class="cm-variable">signal</span>, <span class="cm-string">"sigint"</span>, <span class="cm-keyword">function</span>(<span class="cm-variable">signame</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">print</span>(<span class="cm-string">"got "</span> .. <span class="cm-variable">signame</span> .. <span class="cm-string">", shutting down"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">os.exit</span>(<span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 161px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre><h3 id='uvnewsignal'><code>uv.new_signal()</code></h3><p><span>Creates and initializes a new </span><code>uv_signal_t</code><span>. Returns the Lua userdata wrapping</span>
<span>it.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_signal_t userdata</code><span> or </span><code>fail</code></p><h3 id='uvsignalstartsignal-signame-callback'><code>uv.signal_start(signal, signame, callback)</code></h3><blockquote><p><span>method form </span><code>signal:start(signame, callback)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>signal</code><span>: </span><code>uv_signal_t userdata</code></p></li><li><p><code>signame</code><span>: </span><code>string</code><span> or </span><code>integer</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code></p><ul><li><p><code>signame</code><span>: </span><code>string</code></p></li></ul></li></ul><p><span>Start the handle with the given callback, watching for the given signal.</span></p><p><span>See </span><a href='#constants' target='_blank'><span>Constants</span></a><span> for supported </span><code>signame</code><span> input and output values.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvsignalstartoneshotsignal-signame-callback'><code>uv.signal_start_oneshot(signal, signame, callback)</code></h3><blockquote><p><span>method form </span><code>signal:start_oneshot(signame, callback)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>signal</code><span>: </span><code>uv_signal_t userdata</code></p></li><li><p><code>signame</code><span>: </span><code>string</code><span> or </span><code>integer</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code></p><ul><li><p><code>signame</code><span>: </span><code>string</code></p></li></ul></li></ul><p><span>Same functionality as </span><code>uv.signal_start()</code><span> but the signal handler is reset the moment the signal is received.</span></p><p><span>See </span><a href='#constants' target='_blank'><span>Constants</span></a><span> for supported </span><code>signame</code><span> input and output values.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvsignalstopsignal'><code>uv.signal_stop(signal)</code></h3><blockquote><p><span>method form </span><code>signal:stop()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>signal</code><span>: </span><code>uv_signal_t userdata</code></p></li></ul><p><span>Stop the handle, the callback will no longer be called.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h2 id='uvprocesst-----process-handle'><code>uv_process_t</code><span> — Process handle</span></h2><blockquote><p><a href='#uv_handle_t--base-handle' target='_blank'><code>uv_handle_t</code></a><span> functions also apply.</span></p></blockquote><p><span>Process handles will spawn a new process and allow the user to control it and</span>
<span>establish communication channels with it using streams.</span></p><h3 id='uvdisablestdioinheritance'><code>uv.disable_stdio_inheritance()</code></h3><p><span>Disables inheritance for file descriptors / handles that this process inherited</span>
<span>from its parent. The effect is that child processes spawned by this process</span>
<span>don&#39;t accidentally inherit these handles.</span></p><p><span>It is recommended to call this function as early in your program as possible,</span>
<span>before the inherited file descriptors can be closed or duplicated.</span></p><p><strong><span>Returns:</span></strong><span> Nothing.</span></p><p><strong><span>Note:</span></strong><span> This function works on a best-effort basis: there is no guarantee that</span>
<span>libuv can discover all file descriptors that were inherited. In general it does</span>
<span>a better job on Windows than it does on Unix.</span></p><h3 id='uvspawnpath-options-onexit'><code>uv.spawn(path, options, on_exit)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>options</code><span>: </span><code>table</code><span> (see below)</span></p></li><li><p><code>on_exit</code><span>: </span><code>callable</code></p><ul><li><p><code>code</code><span>: </span><code>integer</code></p></li><li><p><code>signal</code><span>: </span><code>integer</code></p></li></ul></li></ul><p><span>Initializes the process handle and starts the process. If the process is</span>
<span>successfully spawned, this function will return the handle and pid of the child</span>
<span>process.</span></p><p><span>Possible reasons for failing to spawn would include (but not be limited to) the</span>
<span>file to execute not existing, not having permissions to use the setuid or setgid</span>
<span>specified, or not having enough memory to allocate for the new process.</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">stdin</span> = <span class="cm-variable">uv.new_pipe</span>()</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">stdout</span> = <span class="cm-variable">uv.new_pipe</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">stderr</span> = <span class="cm-variable">uv.new_pipe</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-string">"stdin"</span>, <span class="cm-variable">stdin</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-string">"stdout"</span>, <span class="cm-variable">stdout</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-string">"stderr"</span>, <span class="cm-variable">stderr</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">handle</span>, <span class="cm-variable">pid</span> = <span class="cm-variable">uv.spawn</span>(<span class="cm-string">"cat"</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">stdio</span> = {<span class="cm-variable">stdin</span>, <span class="cm-variable">stdout</span>, <span class="cm-variable">stderr</span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}, <span class="cm-keyword">function</span>(<span class="cm-variable">code</span>, <span class="cm-variable">signal</span>) <span class="cm-comment">-- on exit</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">print</span>(<span class="cm-string">"exit code"</span>, <span class="cm-variable">code</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">print</span>(<span class="cm-string">"exit signal"</span>, <span class="cm-variable">signal</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-string">"process opened"</span>, <span class="cm-variable">handle</span>, <span class="cm-variable">pid</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">uv.read_start</span>(<span class="cm-variable">stdout</span>, <span class="cm-keyword">function</span>(<span class="cm-variable">err</span>, <span class="cm-variable">data</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">assert</span>(<span class="cm-keyword">not</span> <span class="cm-variable">err</span>, <span class="cm-variable">err</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">if</span> <span class="cm-variable">data</span> <span class="cm-keyword">then</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-builtin">print</span>(<span class="cm-string">"stdout chunk"</span>, <span class="cm-variable">stdout</span>, <span class="cm-variable">data</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">else</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-builtin">print</span>(<span class="cm-string">"stdout end"</span>, <span class="cm-variable">stdout</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">uv.read_start</span>(<span class="cm-variable">stderr</span>, <span class="cm-keyword">function</span>(<span class="cm-variable">err</span>, <span class="cm-variable">data</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">assert</span>(<span class="cm-keyword">not</span> <span class="cm-variable">err</span>, <span class="cm-variable">err</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">if</span> <span class="cm-variable">data</span> <span class="cm-keyword">then</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-builtin">print</span>(<span class="cm-string">"stderr chunk"</span>, <span class="cm-variable">stderr</span>, <span class="cm-variable">data</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">else</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-builtin">print</span>(<span class="cm-string">"stderr end"</span>, <span class="cm-variable">stderr</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">uv.write</span>(<span class="cm-variable">stdin</span>, <span class="cm-string">"Hello World"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">uv.shutdown</span>(<span class="cm-variable">stdin</span>, <span class="cm-keyword">function</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">print</span>(<span class="cm-string">"stdin shutdown"</span>, <span class="cm-variable">stdin</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">uv.close</span>(<span class="cm-variable">handle</span>, <span class="cm-keyword">function</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-builtin">print</span>(<span class="cm-string">"process closed"</span>, <span class="cm-variable">handle</span>, <span class="cm-variable">pid</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">end</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 991px;"></div><div class="CodeMirror-gutters" style="display: none; height: 991px;"></div></div></div></pre><p><span>The </span><code>options</code><span> table accepts the following fields:</span></p><ul><li><p><code>options.args</code><span> - Command line arguments as a list of strings. The first</span>
<span>string should </span><em><span>not</span></em><span> be the path to the program, since that is already</span>
<span>  provided via </span><code>path</code><span>. On Windows, this uses CreateProcess which concatenates</span>
<span>  the arguments into a string. This can cause some strange errors</span>
<span>  (see </span><code>options.verbatim</code><span> below for Windows).</span></p></li><li><p><code>options.stdio</code><span> - Set the file descriptors that will be made available to</span>
<span>the child process. The convention is that the first entries are stdin, stdout,</span>
<span>  and stderr. (</span><strong><span>Note</span></strong><span>: On Windows, file descriptors after the third are</span>
<span>  available to the child process only if the child processes uses the MSVCRT</span>
<span>  runtime.)</span></p></li><li><p><code>options.env</code><span> - Set environment variables for the new process.</span></p></li><li><p><code>options.cwd</code><span> - Set the current working directory for the sub-process.</span></p></li><li><p><code>options.uid</code><span> - Set the child process&#39; user id.</span></p></li><li><p><code>options.gid</code><span> - Set the child process&#39; group id.</span></p></li><li><p><code>options.verbatim</code><span> - If true, do not wrap any arguments in quotes, or</span>
<span>perform any other escaping, when converting the argument list into a command</span>
<span>  line string. This option is only meaningful on Windows systems. On Unix it is</span>
<span>  silently ignored.</span></p></li><li><p><code>options.detached</code><span> - If true, spawn the child process in a detached state -</span>
<span>this will make it a process group leader, and will effectively enable the</span>
<span>  child to keep running after the parent exits. Note that the child process</span>
<span>  will still keep the parent&#39;s event loop alive unless the parent process calls</span>
<span>  </span><code>uv.unref()</code><span> on the child&#39;s process handle.</span></p></li><li><p><code>options.hide</code><span> - If true, hide the subprocess console window that would</span>
<span>normally be created. This option is only meaningful on Windows systems. On</span>
<span>  Unix it is silently ignored.</span></p></li></ul><p><span>The </span><code>options.stdio</code><span> entries can take many shapes.</span></p><ul><li><p><span>If they are numbers, then the child process inherits that same zero-indexed</span>
<span>fd from the parent process.</span></p></li><li><p><span>If </span><code>uv_stream_t</code><span> handles are passed in, those are used as a read-write pipe</span>
<span>or inherited stream depending if the stream has a valid fd.</span></p></li><li><p><span>Including </span><code>nil</code><span> placeholders means to ignore that fd in the child process.</span></p></li></ul><p><span>When the child process exits, </span><code>on_exit</code><span> is called with an exit code and signal.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_process_t userdata</code><span>, </span><code>integer</code></p><h3 id='uvprocesskillprocess-signame'><code>uv.process_kill(process, signame)</code></h3><blockquote><p><span>method form </span><code>process:kill(signame)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>process</code><span>: </span><code>uv_process_t userdata</code></p></li><li><p><code>signame</code><span>: </span><code>string</code><span> or </span><code>integer</code><span> or </span><code>nil</code><span> (default: </span><code>sigterm</code><span>)</span></p></li></ul><p><span>Sends the specified signal to the given process handle. Check the documentation</span>
<span>on </span><code>uv_signal_t</code><span> for signal support, specially on Windows.</span></p><p><span>See </span><a href='#constants' target='_blank'><span>Constants</span></a><span> for supported </span><code>signame</code><span> input values.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvkillpid-signame'><code>uv.kill(pid, signame)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>pid</code><span>: </span><code>integer</code></p></li><li><p><code>signame</code><span>: </span><code>string</code><span> or </span><code>integer</code><span> or </span><code>nil</code><span> (default: </span><code>sigterm</code><span>)</span></p></li></ul><p><span>Sends the specified signal to the given PID. Check the documentation on</span>
<code>uv_signal_t</code><span> for signal support, specially on Windows.</span></p><p><span>See </span><a href='#constants' target='_blank'><span>Constants</span></a><span> for supported </span><code>signame</code><span> input values.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvprocessgetpidprocess'><code>uv.process_get_pid(process)</code></h3><blockquote><p><span>method form </span><code>process:get_pid()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>process</code><span>: </span><code>uv_process_t userdata</code></p></li></ul><p><span>Returns the handle&#39;s pid.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer</code></p><h2 id='uvstreamt-----stream-handle'><code>uv_stream_t</code><span> — Stream handle</span></h2><blockquote><p><a href='#uv_handle_t--base-handle' target='_blank'><code>uv_handle_t</code></a><span> functions also apply.</span></p></blockquote><p><span>Stream handles provide an abstraction of a duplex communication channel.</span>
<a href='#uv_stream_t--stream-handle' target='_blank'><code>uv_stream_t</code></a><span> is an abstract type, libuv provides 3 stream implementations</span>
<span>in the form of </span><a href='#uv_tcp_t--tcp-handle' target='_blank'><code>uv_tcp_t</code></a><span>, </span><a href='#uv_pipe_t--pipe-handle' target='_blank'><code>uv_pipe_t</code></a><span> and </span><a href='#uv_tty_t--tty-handle' target='_blank'><code>uv_tty_t</code></a><span>.</span></p><h3 id='uvshutdownstream-callback'><code>uv.shutdown(stream, [callback])</code></h3><blockquote><p><span>method form </span><code>stream:shutdown([callback])</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>stream</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_stream_t</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> or </span><code>nil</code></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li></ul></li></ul><p><span>Shutdown the outgoing (write) side of a duplex stream. It waits for pending</span>
<span>write requests to complete. The callback is called after shutdown is complete.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_shutdown_t userdata</code><span> or </span><code>fail</code></p><h3 id='uvlistenstream-backlog-callback'><code>uv.listen(stream, backlog, callback)</code></h3><blockquote><p><span>method form </span><code>stream:listen(backlog, callback)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>stream</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_stream_t</code></p></li><li><p><code>backlog</code><span>: </span><code>integer</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li></ul></li></ul><p><span>Start listening for incoming connections. </span><code>backlog</code><span> indicates the number of</span>
<span>connections the kernel might queue, same as </span><code>listen(2)</code><span>. When a new incoming</span>
<span>connection is received the callback is called.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvacceptstream-clientstream'><code>uv.accept(stream, client_stream)</code></h3><blockquote><p><span>method form </span><code>stream:accept(client_stream)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>stream</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_stream_t</code></p></li><li><p><code>client_stream</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_stream_t</code></p></li></ul><p><span>This call is used in conjunction with </span><code>uv.listen()</code><span> to accept incoming</span>
<span>connections. Call this function after receiving a callback to accept the</span>
<span>connection.</span></p><p><span>When the connection callback is called it is guaranteed that this function</span>
<span>will complete successfully the first time. If you attempt to use it more than</span>
<span>once, it may fail. It is suggested to only call this function once per</span>
<span>connection call.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">server</span>:<span class="cm-variable">listen</span>(<span class="cm-number">128</span>, <span class="cm-keyword">function</span> (<span class="cm-variable">err</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">local</span> <span class="cm-variable">client</span> = <span class="cm-variable">uv.new_tcp</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">server</span>:<span class="cm-variable">accept</span>(<span class="cm-variable">client</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><h3 id='uvreadstartstream-callback'><code>uv.read_start(stream, callback)</code></h3><blockquote><p><span>method form </span><code>stream:read_start(callback)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>stream</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_stream_t</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>data</code><span>: </span><code>string</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Read data from an incoming stream. The callback will be made several times until</span>
<span>there is no more data to read or </span><code>uv.read_stop()</code><span> is called. When we&#39;ve reached</span>
<span>EOF, </span><code>data</code><span> will be </span><code>nil</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">stream</span>:<span class="cm-variable">read_start</span>(<span class="cm-keyword">function</span> (<span class="cm-variable">err</span>, <span class="cm-variable">chunk</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">if</span> <span class="cm-variable">err</span> <span class="cm-keyword">then</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- handle read error</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">elseif</span> <span class="cm-variable">chunk</span> <span class="cm-keyword">then</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- handle data</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">else</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- handle disconnect</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 207px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><h3 id='uvreadstopstream'><code>uv.read_stop(stream)</code></h3><blockquote><p><span>method form </span><code>stream:read_stop()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>stream</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_stream_t</code></p></li></ul><p><span>Stop reading data from the stream. The read callback will no longer be called.</span></p><p><span>This function is idempotent and may be safely called on a stopped stream.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvwritestream-data-callback'><code>uv.write(stream, data, [callback])</code></h3><blockquote><p><span>method form </span><code>stream:write(data, [callback])</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>stream</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_stream_t</code></p></li><li><p><code>data</code><span>: </span><code>buffer</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> or </span><code>nil</code></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li></ul></li></ul><p><span>Write data to stream.</span></p><p><code>data</code><span> can either be a Lua string or a table of strings. If a table is passed</span>
<span>in, the C backend will use writev to send all strings in a single system call.</span></p><p><span>The optional </span><code>callback</code><span> is for knowing when the write is complete.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_write_t userdata</code><span> or </span><code>fail</code></p><h3 id='uvwrite2stream-data-sendhandle-callback'><code>uv.write2(stream, data, send_handle, [callback])</code></h3><blockquote><p><span>method form </span><code>stream:write2(data, send_handle, [callback])</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>stream</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_stream_t</code></p></li><li><p><code>data</code><span>: </span><code>buffer</code></p></li><li><p><code>send_handle</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_stream_t</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> or </span><code>nil</code></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li></ul></li></ul><p><span>Extended write function for sending handles over a pipe. The pipe must be</span>
<span>initialized with </span><code>ipc</code><span> option </span><code>true</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_write_t userdata</code><span> or </span><code>fail</code></p><p><strong><span>Note:</span></strong><span> </span><code>send_handle</code><span> must be a TCP socket or pipe, which is a server or a</span>
<span>connection (listening or connected state). Bound sockets or pipes will be</span>
<span>assumed to be servers.</span></p><h3 id='uvtrywritestream-data'><code>uv.try_write(stream, data)</code></h3><blockquote><p><span>method form </span><code>stream:try_write(data)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>stream</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_stream_t</code></p></li><li><p><code>data</code><span>: </span><code>buffer</code></p></li></ul><p><span>Same as </span><code>uv.write()</code><span>, but won&#39;t queue a write request if it can&#39;t be completed</span>
<span>immediately.</span></p><p><span>Will return number of bytes written (can be less than the supplied buffer size).</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer</code><span> or </span><code>fail</code></p><h3 id='uvtrywrite2stream-data-sendhandle'><code>uv.try_write2(stream, data, send_handle)</code></h3><blockquote><p><span>method form </span><code>stream:try_write2(data, send_handle)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>stream</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_stream_t</code></p></li><li><p><code>data</code><span>: </span><code>buffer</code></p></li><li><p><code>send_handle</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_stream_t</code></p></li></ul><p><span>Like </span><code>uv.write2()</code><span>, but with the properties of </span><code>uv.try_write()</code><span>. Not supported on Windows, where it returns </span><code>UV_EAGAIN</code><span>.</span></p><p><span>Will return number of bytes written (can be less than the supplied buffer size).</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer</code><span> or </span><code>fail</code></p><h3 id='uvisreadablestream'><code>uv.is_readable(stream)</code></h3><blockquote><p><span>method form </span><code>stream:is_readable()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>stream</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_stream_t</code></p></li></ul><p><span>Returns </span><code>true</code><span> if the stream is readable, </span><code>false</code><span> otherwise.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>boolean</code></p><h3 id='uviswritablestream'><code>uv.is_writable(stream)</code></h3><blockquote><p><span>method form </span><code>stream:is_writable()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>stream</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_stream_t</code></p></li></ul><p><span>Returns </span><code>true</code><span> if the stream is writable, </span><code>false</code><span> otherwise.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>boolean</code></p><h3 id='uvstreamsetblockingstream-blocking'><code>uv.stream_set_blocking(stream, blocking)</code></h3><blockquote><p><span>method form </span><code>stream:set_blocking(blocking)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>stream</code><span>: </span><code>userdata</code><span> for sub-type of </span><code>uv_stream_t</code></p></li><li><p><code>blocking</code><span>: </span><code>boolean</code></p></li></ul><p><span>Enable or disable blocking mode for a stream.</span></p><p><span>When blocking mode is enabled all writes complete synchronously. The interface</span>
<span>remains unchanged otherwise, e.g. completion or failure of the operation will</span>
<span>still be reported through a callback which is made asynchronously.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><p><strong><span>Warning</span></strong><span>: Relying too much on this API is not recommended. It is likely to</span>
<span>change significantly in the future. Currently this only works on Windows and</span>
<span>only for </span><code>uv_pipe_t</code><span> handles. Also libuv currently makes no ordering guarantee</span>
<span>when the blocking mode is changed after write requests have already been</span>
<span>submitted. Therefore it is recommended to set the blocking mode immediately</span>
<span>after opening or creating the stream.</span></p><h3 id='uvstreamgetwritequeuesize'><code>uv.stream_get_write_queue_size()</code></h3><blockquote><p><span>method form </span><code>stream:get_write_queue_size()</code></p></blockquote><p><span>Returns the stream&#39;s write queue size.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer</code></p><h2 id='uvtcpt-----tcp-handle'><code>uv_tcp_t</code><span> — TCP handle</span></h2><blockquote><p><a href='#uv_handle_t--base-handle' target='_blank'><code>uv_handle_t</code></a><span> and </span><a href='#uv_stream_t--stream-handle' target='_blank'><code>uv_stream_t</code></a><span> functions also apply.</span></p></blockquote><p><span>TCP handles are used to represent both TCP streams and servers.</span></p><h3 id='uvnewtcpflags'><code>uv.new_tcp([flags])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>flags</code><span>: </span><code>string</code><span> or </span><code>integer</code><span> or </span><code>nil</code></p></li></ul><p><span>Creates and initializes a new </span><code>uv_tcp_t</code><span>. Returns the Lua userdata wrapping it.</span></p><p><span>If set, </span><code>flags</code><span> must be a valid address family. See </span><a href='#constants' target='_blank'><span>Constants</span></a><span> for supported</span>
<span>address family input values.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_tcp_t userdata</code><span> or </span><code>fail</code></p><h3 id='uvtcpopentcp-sock'><code>uv.tcp_open(tcp, sock)</code></h3><blockquote><p><span>method form </span><code>tcp:open(sock)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>tcp</code><span>: </span><code>uv_tcp_t userdata</code></p></li><li><p><code>sock</code><span>: </span><code>integer</code></p></li></ul><p><span>Open an existing file descriptor or SOCKET as a TCP handle.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><p><strong><span>Note:</span></strong><span> The passed file descriptor or SOCKET is not checked for its type, but it&#39;s required that it represents a valid stream socket.</span></p><h3 id='uvtcpnodelaytcp-enable'><code>uv.tcp_nodelay(tcp, enable)</code></h3><blockquote><p><span>method form </span><code>tcp:nodelay(enable)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>tcp</code><span>: </span><code>uv_tcp_t userdata</code></p></li><li><p><code>enable</code><span>: </span><code>boolean</code></p></li></ul><p><span>Enable / disable Nagle&#39;s algorithm.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvtcpkeepalivetcp-enable-delay'><code>uv.tcp_keepalive(tcp, enable, [delay])</code></h3><blockquote><p><span>method form </span><code>tcp:keepalive(enable, [delay])</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>tcp</code><span>: </span><code>uv_tcp_t userdata</code></p></li><li><p><code>enable</code><span>: </span><code>boolean</code></p></li><li><p><code>delay</code><span>: </span><code>integer</code><span> or </span><code>nil</code></p></li></ul><p><span>Enable / disable TCP keep-alive. </span><code>delay</code><span> is the initial delay in seconds,</span>
<span>ignored when enable is </span><code>false</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvtcpsimultaneousacceptstcp-enable'><code>uv.tcp_simultaneous_accepts(tcp, enable)</code></h3><blockquote><p><span>method form </span><code>tcp:simultaneous_accepts(enable)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>tcp</code><span>: </span><code>uv_tcp_t userdata</code></p></li><li><p><code>enable</code><span>: </span><code>boolean</code></p></li></ul><p><span>Enable / disable simultaneous asynchronous accept requests that are queued by</span>
<span>the operating system when listening for new TCP connections.</span></p><p><span>This setting is used to tune a TCP server for the desired performance. Having</span>
<span>simultaneous accepts can significantly improve the rate of accepting connections</span>
<span>(which is why it is enabled by default) but may lead to uneven load distribution</span>
<span>in multi-process setups.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvtcpbindtcp-host-port-flags'><code>uv.tcp_bind(tcp, host, port, [flags])</code></h3><blockquote><p><span>method form </span><code>tcp:bind(host, port, [flags])</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>tcp</code><span>: </span><code>uv_tcp_t userdata</code></p></li><li><p><code>host</code><span>: </span><code>string</code></p></li><li><p><code>port</code><span>: </span><code>integer</code></p></li><li><p><code>flags</code><span>: </span><code>table</code><span> or </span><code>nil</code></p><ul><li><p><code>ipv6only</code><span>: </span><code>boolean</code></p></li></ul></li></ul><p><span>Bind the handle to an host and port. </span><code>host</code><span> should be an IP address and</span>
<span>not a domain name. Any </span><code>flags</code><span> are set with a table with field </span><code>ipv6only</code>
<span>equal to </span><code>true</code><span> or </span><code>false</code><span>.</span></p><p><span>When the port is already taken, you can expect to see an </span><code>EADDRINUSE</code><span> error</span>
<span>from either </span><code>uv.tcp_bind()</code><span>, </span><code>uv.listen()</code><span> or </span><code>uv.tcp_connect()</code><span>. That is, a</span>
<span>successful call to this function does not guarantee that the call to </span><code>uv.listen()</code>
<span>or </span><code>uv.tcp_connect()</code><span> will succeed as well.</span></p><p><span>Use a port of </span><code>0</code><span> to let the OS assign an ephemeral port.  You can look it up</span>
<span>later using </span><code>uv.tcp_getsockname()</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvtcpgetpeernametcp'><code>uv.tcp_getpeername(tcp)</code></h3><blockquote><p><span>method form </span><code>tcp:getpeername()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>tcp</code><span>: </span><code>uv_tcp_t userdata</code></p></li></ul><p><span>Get the address of the peer connected to the handle.</span></p><p><span>See </span><a href='#constants' target='_blank'><span>Constants</span></a><span> for supported address </span><code>family</code><span> output values.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>table</code><span> or </span><code>fail</code></p><ul><li><p><code>ip</code><span> : </span><code>string</code></p></li><li><p><code>family</code><span> : </span><code>string</code></p></li><li><p><code>port</code><span> : </span><code>integer</code></p></li></ul><h3 id='uvtcpgetsocknametcp'><code>uv.tcp_getsockname(tcp)</code></h3><blockquote><p><span>method form </span><code>tcp:getsockname()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>tcp</code><span>: </span><code>uv_tcp_t userdata</code></p></li></ul><p><span>Get the current address to which the handle is bound.</span></p><p><span>See </span><a href='#constants' target='_blank'><span>Constants</span></a><span> for supported address </span><code>family</code><span> output values.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>table</code><span> or </span><code>fail</code></p><ul><li><p><code>ip</code><span> : </span><code>string</code></p></li><li><p><code>family</code><span> : </span><code>string</code></p></li><li><p><code>port</code><span> : </span><code>integer</code></p></li></ul><h3 id='uvtcpconnecttcp-host-port-callback'><code>uv.tcp_connect(tcp, host, port, callback)</code></h3><blockquote><p><span>method form </span><code>tcp:connect(host, port, callback)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>tcp</code><span>: </span><code>uv_tcp_t userdata</code></p></li><li><p><code>host</code><span>: </span><code>string</code></p></li><li><p><code>port</code><span>: </span><code>integer</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li></ul></li></ul><p><span>Establish an IPv4 or IPv6 TCP connection.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_connect_t userdata</code><span> or </span><code>fail</code></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">client</span> = <span class="cm-variable">uv.new_tcp</span>()</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">client</span>:<span class="cm-variable">connect</span>(<span class="cm-string">"127.0.0.1"</span>, <span class="cm-number">8080</span>, <span class="cm-keyword">function</span> (<span class="cm-variable">err</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">-- check error and carry on.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><h3 id='uvtcpwritequeuesizetcp'><code>uv.tcp_write_queue_size(tcp)</code></h3><blockquote><p><span>method form </span><code>tcp:write_queue_size()</code></p></blockquote><p><strong><span>Deprecated:</span></strong><span> Please use </span><code>uv.stream_get_write_queue_size()</code><span> instead.</span></p><h3 id='uvtcpcloseresetcallback'><code>uv.tcp_close_reset([callback])</code></h3><blockquote><p><span>method form </span><code>tcp:close_reset([callback])</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>tcp</code><span>: </span><code>uv_tcp_t userdata</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> or </span><code>nil</code></p></li></ul><p><span>Resets a TCP connection by sending a RST packet. This is accomplished by setting</span>
<span>the SO_LINGER socket option with a linger interval of zero and then calling</span>
<code>uv.close()</code><span>. Due to some platform inconsistencies, mixing of </span><code>uv.shutdown()</code>
<span>and </span><code>uv.tcp_close_reset()</code><span> calls is not allowed.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvsocketpairsocktype-protocol-flags1-flags2'><code>uv.socketpair([socktype], [protocol], [flags1], [flags2])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>socktype</code><span>: </span><code>string</code><span>, </span><code>integer</code><span> or </span><code>nil</code><span> (default: </span><code>stream</code><span>)</span></p></li><li><p><code>protocol</code><span>: </span><code>string</code><span>, </span><code>integer</code><span> or </span><code>nil</code><span> (default: 0)</span></p></li><li><p><code>flags1</code><span>: </span><code>table</code><span> or </span><code>nil</code></p><ul><li><p><code>nonblock</code><span>: </span><code>boolean</code><span> (default: </span><code>false</code><span>)</span></p></li></ul></li><li><p><code>flags2</code><span>: </span><code>table</code><span> or </span><code>nil</code></p><ul><li><p><code>nonblock</code><span>: </span><code>boolean</code><span> (default: </span><code>false</code><span>)</span></p></li></ul></li></ul><p><span>Create a pair of connected sockets with the specified properties. The resulting handles can be passed to </span><code>uv.tcp_open</code><span>, used with </span><code>uv.spawn</code><span>, or for any other purpose.</span></p><p><span>See </span><a href='#constants' target='_blank'><span>Constants</span></a><span> for supported </span><code>socktype</code><span> input values.</span></p><p><span>When </span><code>protocol</code><span> is set to 0 or nil, it will be automatically chosen based on the socket&#39;s domain and type. When </span><code>protocol</code><span> is specified as a string, it will be looked up using the </span><code>getprotobyname(3)</code><span> function (examples: </span><code>&quot;ip&quot;</code><span>, </span><code>&quot;icmp&quot;</code><span>, </span><code>&quot;tcp&quot;</code><span>, </span><code>&quot;udp&quot;</code><span>, etc).</span></p><p><span>Flags:</span></p><ul><li><p><code>nonblock</code><span>: Opens the specified socket handle for </span><code>OVERLAPPED</code><span> or </span><code>FIONBIO</code><span>/</span><code>O_NONBLOCK</code><span> I/O usage. This is recommended for handles that will be used by libuv, and not usually recommended otherwise.</span></p></li></ul><p><span>Equivalent to </span><code>socketpair(2)</code><span> with a domain of </span><code>AF_UNIX</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>table</code><span> or </span><code>fail</code></p><ul><li><p><code>[1, 2]</code><span> : </span><code>integer</code><span> (file descriptor)</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- Simple read/write with tcp</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">fds</span> = <span class="cm-variable">uv.socketpair</span>(<span class="cm-keyword">nil</span>, <span class="cm-keyword">nil</span>, {<span class="cm-variable">nonblock</span>=<span class="cm-keyword">true</span>}, {<span class="cm-variable">nonblock</span>=<span class="cm-keyword">true</span>})</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">sock1</span> = <span class="cm-variable">uv.new_tcp</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sock1</span>:<span class="cm-variable">open</span>(<span class="cm-variable">fds</span>[<span class="cm-number">1</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">sock2</span> = <span class="cm-variable">uv.new_tcp</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sock2</span>:<span class="cm-variable">open</span>(<span class="cm-variable">fds</span>[<span class="cm-number">2</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sock1</span>:<span class="cm-builtin">write</span>(<span class="cm-string">"hello"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sock2</span>:<span class="cm-variable">read_start</span>(<span class="cm-keyword">function</span>(<span class="cm-variable">err</span>, <span class="cm-variable">chunk</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">assert</span>(<span class="cm-keyword">not</span> <span class="cm-variable">err</span>, <span class="cm-variable">err</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">print</span>(<span class="cm-variable">chunk</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 323px;"></div><div class="CodeMirror-gutters" style="display: none; height: 323px;"></div></div></div></pre><h2 id='uvpipet-----pipe-handle'><code>uv_pipe_t</code><span> — Pipe handle</span></h2><blockquote><p><a href='#uv_handle_t--base-handle' target='_blank'><code>uv_handle_t</code></a><span> and </span><a href='#uv_stream_t--stream-handle' target='_blank'><code>uv_stream_t</code></a><span> functions also apply.</span></p></blockquote><p><span>Pipe handles provide an abstraction over local domain sockets on Unix and named pipes on Windows.</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">pipe</span> = <span class="cm-variable">uv.new_pipe</span>(<span class="cm-keyword">false</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pipe</span>:<span class="cm-variable">bind</span>(<span class="cm-string">'/tmp/sock.test'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pipe</span>:<span class="cm-variable">listen</span>(<span class="cm-number">128</span>, <span class="cm-keyword">function</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">local</span> <span class="cm-variable">client</span> = <span class="cm-variable">uv.new_pipe</span>(<span class="cm-keyword">false</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">pipe</span>:<span class="cm-variable">accept</span>(<span class="cm-variable">client</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">client</span>:<span class="cm-builtin">write</span>(<span class="cm-string">"hello!\n"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">client</span>:<span class="cm-builtin">close</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 230px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><h3 id='uvnewpipeipc'><code>uv.new_pipe([ipc])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>ipc</code><span>: </span><code>boolean</code><span> or </span><code>nil</code><span> (default: </span><code>false</code><span>)</span></p></li></ul><p><span>Creates and initializes a new </span><code>uv_pipe_t</code><span>. Returns the Lua userdata wrapping</span>
<span>it. The </span><code>ipc</code><span> argument is a boolean to indicate if this pipe will be used for</span>
<span>handle passing between processes.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_pipe_t userdata</code><span> or </span><code>fail</code></p><h3 id='uvpipeopenpipe-fd'><code>uv.pipe_open(pipe, fd)</code></h3><blockquote><p><span>method form </span><code>pipe:open(fd)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>pipe</code><span>: </span><code>uv_pipe_t userdata</code></p></li><li><p><code>fd</code><span>: </span><code>integer</code></p></li></ul><p><span>Open an existing file descriptor or </span><a href='#uv_handle_t--base-handle' target='_blank'><code>uv_handle_t</code></a><span> as a pipe.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><p><strong><span>Note</span></strong><span>: The file descriptor is set to non-blocking mode.</span></p><h3 id='uvpipebindpipe-name'><code>uv.pipe_bind(pipe, name)</code></h3><blockquote><p><span>method form </span><code>pipe:bind(name)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>pipe</code><span>: </span><code>uv_pipe_t userdata</code></p></li><li><p><code>name</code><span>: </span><code>string</code></p></li></ul><p><span>Bind the pipe to a file path (Unix) or a name (Windows).</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><p><strong><span>Note</span></strong><span>: Paths on Unix get truncated to sizeof(sockaddr_un.sun_path) bytes,</span>
<span>typically between 92 and 108 bytes.</span></p><h3 id='uvpipeconnectpipe-name-callback'><code>uv.pipe_connect(pipe, name, [callback])</code></h3><blockquote><p><span>method form </span><code>pipe:connect(name, [callback])</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>pipe</code><span>: </span><code>uv_pipe_t userdata</code></p></li><li><p><code>name</code><span>: </span><code>string</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> or </span><code>nil</code></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li></ul></li></ul><p><span>Connect to the Unix domain socket or the named pipe.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_connect_t userdata</code><span> or </span><code>fail</code></p><p><strong><span>Note</span></strong><span>: Paths on Unix get truncated to sizeof(sockaddr_un.sun_path) bytes,</span>
<span>typically between 92 and 108 bytes.</span></p><h3 id='uvpipegetsocknamepipe'><code>uv.pipe_getsockname(pipe)</code></h3><blockquote><p><span>method form </span><code>pipe:getsockname()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>pipe</code><span>: </span><code>uv_pipe_t userdata</code></p></li></ul><p><span>Get the name of the Unix domain socket or the named pipe.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>string</code><span> or </span><code>fail</code></p><h3 id='uvpipegetpeernamepipe'><code>uv.pipe_getpeername(pipe)</code></h3><blockquote><p><span>method form </span><code>pipe:getpeername()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>pipe</code><span>: </span><code>uv_pipe_t userdata</code></p></li></ul><p><span>Get the name of the Unix domain socket or the named pipe to which the handle is</span>
<span>connected.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>string</code><span> or </span><code>fail</code></p><h3 id='uvpipependinginstancespipe-count'><code>uv.pipe_pending_instances(pipe, count)</code></h3><blockquote><p><span>method form </span><code>pipe:pending_instances(count)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>pipe</code><span>: </span><code>uv_pipe_t userdata</code></p></li><li><p><code>count</code><span>: </span><code>integer</code></p></li></ul><p><span>Set the number of pending pipe instance handles when the pipe server is waiting</span>
<span>for connections.</span></p><p><strong><span>Returns:</span></strong><span> Nothing.</span></p><p><strong><span>Note</span></strong><span>: This setting applies to Windows only.</span></p><h3 id='uvpipependingcountpipe'><code>uv.pipe_pending_count(pipe)</code></h3><blockquote><p><span>method form </span><code>pipe:pending_count()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>pipe</code><span>: </span><code>uv_pipe_t userdata</code></p></li></ul><p><span>Returns the pending pipe count for the named pipe.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer</code></p><h3 id='uvpipependingtypepipe'><code>uv.pipe_pending_type(pipe)</code></h3><blockquote><p><span>method form </span><code>pipe:pending_type()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>pipe</code><span>: </span><code>uv_pipe_t userdata</code></p></li></ul><p><span>Used to receive handles over IPC pipes.</span></p><p><span>First - call </span><code>uv.pipe_pending_count()</code><span>, if it&#39;s &gt; 0 then initialize a handle of</span>
<span>the given type, returned by </span><code>uv.pipe_pending_type()</code><span> and call</span>
<code>uv.accept(pipe, handle)</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>string</code></p><h3 id='uvpipechmodpipe-flags'><code>uv.pipe_chmod(pipe, flags)</code></h3><blockquote><p><span>method form </span><code>pipe:chmod(flags)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>pipe</code><span>: </span><code>uv_pipe_t userdata</code></p></li><li><p><code>flags</code><span>: </span><code>string</code></p></li></ul><p><span>Alters pipe permissions, allowing it to be accessed from processes run by different users.</span>
<span>Makes the pipe writable or readable by all users. </span><code>flags</code><span> are: </span><code>&quot;r&quot;</code><span>, </span><code>&quot;w&quot;</code><span>, </span><code>&quot;rw&quot;</code><span>, or </span><code>&quot;wr&quot;</code>
<span>where </span><code>r</code><span> is </span><code>READABLE</code><span> and </span><code>w</code><span> is </span><code>WRITABLE</code><span>. This function is blocking.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvpipereadflags-writeflags'><code>uv.pipe(read_flags, write_flags)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>read_flags</code><span>: </span><code>table</code><span> or </span><code>nil</code></p><ul><li><p><code>nonblock</code><span>: </span><code>boolean</code><span> (default: </span><code>false</code><span>)</span></p></li></ul></li><li><p><code>write_flags</code><span>: </span><code>table</code><span> or </span><code>nil</code></p><ul><li><p><code>nonblock</code><span>: </span><code>boolean</code><span> (default: </span><code>false</code><span>)</span></p></li></ul></li></ul><p><span>Create a pair of connected pipe handles. Data may be written to the </span><code>write</code><span> fd and read from the </span><code>read</code><span> fd. The resulting handles can be passed to </span><code>pipe_open</code><span>, used with </span><code>spawn</code><span>, or for any other purpose.</span></p><p><span>Flags:</span></p><ul><li><p><code>nonblock</code><span>: Opens the specified socket handle for </span><code>OVERLAPPED</code><span> or </span><code>FIONBIO</code><span>/</span><code>O_NONBLOCK</code><span> I/O usage. This is recommended for handles that will be used by libuv, and not usually recommended otherwise.</span></p></li></ul><p><span>Equivalent to </span><code>pipe(2)</code><span> with the </span><code>O_CLOEXEC</code><span> flag set.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>table</code><span> or </span><code>fail</code></p><ul><li><p><code>read</code><span> : </span><code>integer</code><span> (file descriptor)</span></p></li><li><p><code>write</code><span> : </span><code>integer</code><span> (file descriptor)</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- Simple read/write with pipe_open</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">fds</span> = <span class="cm-variable">uv.pipe</span>({<span class="cm-variable">nonblock</span>=<span class="cm-keyword">true</span>}, {<span class="cm-variable">nonblock</span>=<span class="cm-keyword">true</span>})</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">read_pipe</span> = <span class="cm-variable">uv.new_pipe</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">read_pipe</span>:<span class="cm-variable">open</span>(<span class="cm-variable">fds.read</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">write_pipe</span> = <span class="cm-variable">uv.new_pipe</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">write_pipe</span>:<span class="cm-variable">open</span>(<span class="cm-variable">fds.write</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">write_pipe</span>:<span class="cm-builtin">write</span>(<span class="cm-string">"hello"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">read_pipe</span>:<span class="cm-variable">read_start</span>(<span class="cm-keyword">function</span>(<span class="cm-variable">err</span>, <span class="cm-variable">chunk</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">assert</span>(<span class="cm-keyword">not</span> <span class="cm-variable">err</span>, <span class="cm-variable">err</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">print</span>(<span class="cm-variable">chunk</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 323px;"></div><div class="CodeMirror-gutters" style="display: none; height: 323px;"></div></div></div></pre><h3 id='uvpipebind2pipe-name-flags'><code>uv.pipe_bind2(pipe, name, [flags])</code></h3><blockquote><p><span>method form </span><code>pipe:bind2(name, [flags])</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>pipe</code><span>: </span><code>uv_pipe_t userdata</code></p></li><li><p><code>name</code><span>: </span><code>string</code></p></li><li><p><code>flags</code><span>: </span><code>integer</code><span> or </span><code>table</code><span> or </span><code>nil</code><span>(default: 0)</span></p></li></ul><p><span>Bind the pipe to a file path (Unix) or a name (Windows).</span></p><p><code>Flags</code><span>:</span></p><ul><li><p><span>If </span><code>type(flags)</code><span> is </span><code>number</code><span>, it must be </span><code>0</code><span> or </span><code>uv.constants.PIPE_NO_TRUNCATE</code><span>.</span></p></li><li><p><span>If </span><code>type(flags)</code><span> is </span><code>table</code><span>, it must be </span><code>{}</code><span> or </span><code>{ no_truncate = true|false }</code><span>.</span></p></li><li><p><span>If </span><code>type(flags)</code><span> is </span><code>nil</code><span>, it use default value </span><code>0</code><span>.</span></p></li><li><p><span>Returns </span><code>EINVAL</code><span> for unsupported flags without performing the bind operation.</span></p></li></ul><p><span>Supports Linux abstract namespace sockets. namelen must include the leading &#39;\0&#39; byte but not the trailing nul byte.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><p><strong><span>Note</span></strong><span>:</span></p><ol start='' ><li><p><span>Paths on Unix get truncated to sizeof(sockaddr_un.sun_path) bytes,</span>
<span>typically between 92 and 108 bytes.</span></p></li><li><p><span>New in version 1.46.0.</span></p></li></ol><h3 id='uvpipeconnect2pipe-name-flags-callback'><code>uv.pipe_connect2(pipe, name, [flags], [callback])</code></h3><blockquote><p><span>method form </span><code>pipe:connect2(name, [flags], [callback])</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>pipe</code><span>: </span><code>uv_pipe_t userdata</code></p></li><li><p><code>name</code><span>: </span><code>string</code></p></li><li><p><code>flags</code><span>: </span><code>integer</code><span> or </span><code>table</code><span> or </span><code>nil</code><span>(default: 0)</span></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> or </span><code>nil</code></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li></ul></li></ul><p><span>Connect to the Unix domain socket or the named pipe.</span></p><p><code>Flags</code><span>:</span></p><ul><li><p><span>If </span><code>type(flags)</code><span> is </span><code>number</code><span>, it must be </span><code>0</code><span> or </span><code>uv.constants.PIPE_NO_TRUNCATE</code><span>.</span></p></li><li><p><span>If </span><code>type(flags)</code><span> is </span><code>table</code><span>, it must be </span><code>{}</code><span> or </span><code>{ no_truncate = true|false }</code><span>.</span></p></li><li><p><span>If </span><code>type(flags)</code><span> is </span><code>nil</code><span>, it use default value </span><code>0</code><span>.</span></p></li><li><p><span>Returns </span><code>EINVAL</code><span> for unsupported flags without performing the bind operation.</span></p></li></ul><p><span>Supports Linux abstract namespace sockets. namelen must include the leading nul byte but not the trailing nul byte.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_connect_t userdata</code><span> or </span><code>fail</code></p><p><strong><span>Note</span></strong><span>:</span></p><ol start='' ><li><p><span>Paths on Unix get truncated to sizeof(sockaddr_un.sun_path) bytes,</span>
<span>typically between 92 and 108 bytes.</span></p></li><li><p><span>New in version 1.46.0.</span></p></li></ol><h2 id='uvttyt-----tty-handle'><code>uv_tty_t</code><span> — TTY handle</span></h2><blockquote><p><a href='#uv_handle_t--base-handle' target='_blank'><code>uv_handle_t</code></a><span> and </span><a href='#uv_stream_t--stream-handle' target='_blank'><code>uv_stream_t</code></a><span> functions also apply.</span></p></blockquote><p><span>TTY handles represent a stream for the console.</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- Simple echo program</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">stdin</span> = <span class="cm-variable">uv.new_tty</span>(<span class="cm-number">0</span>, <span class="cm-keyword">true</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">stdout</span> = <span class="cm-variable">uv.new_tty</span>(<span class="cm-number">1</span>, <span class="cm-keyword">false</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">stdin</span>:<span class="cm-variable">read_start</span>(<span class="cm-keyword">function</span> (<span class="cm-variable">err</span>, <span class="cm-variable">data</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">assert</span>(<span class="cm-keyword">not</span> <span class="cm-variable">err</span>, <span class="cm-variable">err</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">if</span> <span class="cm-variable">data</span> <span class="cm-keyword">then</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">stdout</span>:<span class="cm-builtin">write</span>(<span class="cm-variable">data</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">else</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">stdin</span>:<span class="cm-builtin">close</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">stdout</span>:<span class="cm-builtin">close</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 300px;"></div><div class="CodeMirror-gutters" style="display: none; height: 300px;"></div></div></div></pre><h3 id='uvnewttyfd-readable'><code>uv.new_tty(fd, readable)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>fd</code><span>: </span><code>integer</code></p></li><li><p><code>readable</code><span>: </span><code>boolean</code></p></li></ul><p><span>Initialize a new TTY stream with the given file descriptor. Usually the file</span>
<span>descriptor will be:</span></p><ul><li><p><span>0 - stdin</span></p></li><li><p><span>1 - stdout</span></p></li><li><p><span>2 - stderr</span></p></li></ul><p><span>On Unix this function will determine the path of the fd of the terminal using</span>
<span>ttyname_r(3), open it, and use it if the passed file descriptor refers to a TTY.</span>
<span>This lets libuv put the tty in non-blocking mode without affecting other</span>
<span>processes that share the tty.</span></p><p><span>This function is not thread safe on systems that don’t support ioctl TIOCGPTN or TIOCPTYGNAME, for instance OpenBSD and Solaris.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_tty_t userdata</code><span> or </span><code>fail</code></p><p><strong><span>Note:</span></strong><span> If reopening the TTY fails, libuv falls back to blocking writes.</span></p><h3 id='uvttysetmodetty-mode'><code>uv.tty_set_mode(tty, mode)</code></h3><blockquote><p><span>method form </span><code>tty:set_mode(mode)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>tty</code><span>: </span><code>uv_tty_t userdata</code></p></li><li><p><code>mode</code><span>: </span><code>string</code><span> or </span><code>integer</code></p></li></ul><p><span>Set the TTY using the specified terminal mode.</span></p><p><span>See </span><a href='#constants' target='_blank'><span>Constants</span></a><span> for supported TTY mode input values.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvttyresetmode'><code>uv.tty_reset_mode()</code></h3><p><span>To be called when the program exits. Resets TTY settings to default values for</span>
<span>the next process to take over.</span></p><p><span>This function is async signal-safe on Unix platforms but can fail with error</span>
<span>code </span><code>EBUSY</code><span> if you call it when execution is inside </span><code>uv.tty_set_mode()</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvttygetwinsizetty'><code>uv.tty_get_winsize(tty)</code></h3><blockquote><p><span>method form </span><code>tty:get_winsize()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>tty</code><span>: </span><code>uv_tty_t userdata</code></p></li></ul><p><span>Gets the current Window width and height.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer, integer</code><span> or </span><code>fail</code></p><h3 id='uvttysetvtermstatestate'><code>uv.tty_set_vterm_state(state)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>state</code><span>: </span><code>string</code></p></li></ul><p><span>Controls whether console virtual terminal sequences are processed by libuv or</span>
<span>console. Useful in particular for enabling ConEmu support of ANSI X3.64 and</span>
<span>Xterm 256 colors. Otherwise Windows10 consoles are usually detected</span>
<span>automatically. State should be one of: </span><code>&quot;supported&quot;</code><span> or </span><code>&quot;unsupported&quot;</code><span>.</span></p><p><span>This function is only meaningful on Windows systems. On Unix it is silently</span>
<span>ignored.</span></p><p><strong><span>Returns:</span></strong><span> none</span></p><h3 id='uvttygetvtermstate'><code>uv.tty_get_vterm_state()</code></h3><p><span>Get the current state of whether console virtual terminal sequences are handled</span>
<span>by libuv or the console. The return value is </span><code>&quot;supported&quot;</code><span> or </span><code>&quot;unsupported&quot;</code><span>.</span></p><p><span>This function is not implemented on Unix, where it returns </span><code>ENOTSUP</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>string</code><span> or </span><code>fail</code></p><h2 id='uvudpt-----udp-handle'><code>uv_udp_t</code><span> — UDP handle</span></h2><blockquote><p><a href='#uv_handle_t--base-handle' target='_blank'><code>uv_handle_t</code></a><span> functions also apply.</span></p></blockquote><p><span>UDP handles encapsulate UDP communication for both clients and servers.</span></p><h3 id='uvnewudpflags'><code>uv.new_udp([flags])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>flags</code><span>: </span><code>table</code><span> or </span><code>nil</code></p><ul><li><p><code>family</code><span>: </span><code>string</code><span> or </span><code>nil</code></p></li><li><p><code>mmsgs</code><span>: </span><code>integer</code><span> or </span><code>nil</code><span> (default: </span><code>1</code><span>)</span></p></li></ul></li></ul><p><span>Creates and initializes a new </span><code>uv_udp_t</code><span>. Returns the Lua userdata wrapping</span>
<span>it. The actual socket is created lazily.</span></p><p><span>See </span><a href='#constants' target='_blank'><span>Constants</span></a><span> for supported address </span><code>family</code><span> input values.</span></p><p><span>When specified, </span><code>mmsgs</code><span> determines the number of messages able to be received</span>
<span>at one time via </span><code>recvmmsg(2)</code><span> (the allocated buffer will be sized to be able</span>
<span>to fit the specified number of max size dgrams). Only has an effect on</span>
<span>platforms that support </span><code>recvmmsg(2)</code><span>.</span></p><p><strong><span>Note:</span></strong><span> For backwards compatibility reasons, </span><code>flags</code><span> can also be a string or</span>
<span>integer. When it is a string, it will be treated like the </span><code>family</code><span> key above.</span>
<span>When it is an integer, it will be used directly as the </span><code>flags</code><span> parameter when</span>
<span>calling </span><code>uv_udp_init_ex</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_udp_t userdata</code><span> or </span><code>fail</code></p><h3 id='uvudpgetsendqueuesize'><code>uv.udp_get_send_queue_size()</code></h3><blockquote><p><span>method form </span><code>udp:get_send_queue_size()</code></p></blockquote><p><span>Returns the handle&#39;s send queue size.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer</code></p><h3 id='uvudpgetsendqueuecount'><code>uv.udp_get_send_queue_count()</code></h3><blockquote><p><span>method form </span><code>udp:get_send_queue_count()</code></p></blockquote><p><span>Returns the handle&#39;s send queue count.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer</code></p><h3 id='uvudpopenudp-fd'><code>uv.udp_open(udp, fd)</code></h3><blockquote><p><span>method form </span><code>udp:open(fd)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>udp</code><span>: </span><code>uv_udp_t userdata</code></p></li><li><p><code>fd</code><span>: </span><code>integer</code></p></li></ul><p><span>Opens an existing file descriptor or Windows SOCKET as a UDP handle.</span></p><p><span>Unix only: The only requirement of the sock argument is that it follows the</span>
<span>datagram contract (works in unconnected mode, supports sendmsg()/recvmsg(),</span>
<span>etc). In other words, other datagram-type sockets like raw sockets or netlink</span>
<span>sockets can also be passed to this function.</span></p><p><span>The file descriptor is set to non-blocking mode.</span></p><p><span>Note: The passed file descriptor or SOCKET is not checked for its type, but</span>
<span>it&#39;s required that it represents a valid datagram socket.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvudpbindudp-host-port-flags'><code>uv.udp_bind(udp, host, port, [flags])</code></h3><blockquote><p><span>method form </span><code>udp:bind(host, port, [flags])</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>udp</code><span>: </span><code>uv_udp_t userdata</code></p></li><li><p><code>host</code><span>: </span><code>string</code></p></li><li><p><code>port</code><span>: </span><code>number</code></p></li><li><p><code>flags</code><span>: </span><code>table</code><span> or </span><code>nil</code></p><ul><li><p><code>ipv6only</code><span>: </span><code>boolean</code></p></li><li><p><code>reuseaddr</code><span>: </span><code>boolean</code></p></li></ul></li></ul><p><span>Bind the UDP handle to an IP address and port. Any </span><code>flags</code><span> are set with a table</span>
<span>with fields </span><code>reuseaddr</code><span> or </span><code>ipv6only</code><span> equal to </span><code>true</code><span> or </span><code>false</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvudpgetsocknameudp'><code>uv.udp_getsockname(udp)</code></h3><blockquote><p><span>method form </span><code>udp:getsockname()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>udp</code><span>: </span><code>uv_udp_t userdata</code></p></li></ul><p><span>Get the local IP and port of the UDP handle.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>table</code><span> or </span><code>fail</code></p><ul><li><p><code>ip</code><span> : </span><code>string</code></p></li><li><p><code>family</code><span> : </span><code>string</code></p></li><li><p><code>port</code><span> : </span><code>integer</code></p></li></ul><h3 id='uvudpgetpeernameudp'><code>uv.udp_getpeername(udp)</code></h3><blockquote><p><span>method form </span><code>udp:getpeername()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>udp</code><span>: </span><code>uv_udp_t userdata</code></p></li></ul><p><span>Get the remote IP and port of the UDP handle on connected UDP handles.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>table</code><span> or </span><code>fail</code></p><ul><li><p><code>ip</code><span> : </span><code>string</code></p></li><li><p><code>family</code><span> : </span><code>string</code></p></li><li><p><code>port</code><span> : </span><code>integer</code></p></li></ul><h3 id='uvudpsetmembershipudp-multicastaddr-interfaceaddr-membership'><code>uv.udp_set_membership(udp, multicast_addr, interface_addr, membership)</code></h3><blockquote><p><span>method form </span><code>udp:set_membership(multicast_addr, interface_addr, membership)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>udp</code><span>: </span><code>uv_udp_t userdata</code></p></li><li><p><code>multicast_addr</code><span>: </span><code>string</code></p></li><li><p><code>interface_addr</code><span>: </span><code>string</code><span> or </span><code>nil</code></p></li><li><p><code>membership</code><span>: </span><code>string</code></p></li></ul><p><span>Set membership for a multicast address. </span><code>multicast_addr</code><span> is multicast address to</span>
<span>set membership for. </span><code>interface_addr</code><span> is interface address. </span><code>membership</code><span> can be</span>
<span>the string </span><code>&quot;leave&quot;</code><span> or </span><code>&quot;join&quot;</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvudpsetsourcemembershipudp-multicastaddr-interfaceaddr-sourceaddr-membership'><code>uv.udp_set_source_membership(udp, multicast_addr, interface_addr, source_addr, membership)</code></h3><blockquote><p><span>method form </span><code>udp:set_source_membership(multicast_addr, interface_addr, source_addr, membership)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>udp</code><span>: </span><code>uv_udp_t userdata</code></p></li><li><p><code>multicast_addr</code><span>: </span><code>string</code></p></li><li><p><code>interface_addr</code><span>: </span><code>string</code><span> or </span><code>nil</code></p></li><li><p><code>source_addr</code><span>: </span><code>string</code></p></li><li><p><code>membership</code><span>: </span><code>string</code></p></li></ul><p><span>Set membership for a source-specific multicast group. </span><code>multicast_addr</code><span> is multicast</span>
<span>address to set membership for. </span><code>interface_addr</code><span> is interface address. </span><code>source_addr</code>
<span>is source address. </span><code>membership</code><span> can be the string </span><code>&quot;leave&quot;</code><span> or </span><code>&quot;join&quot;</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvudpsetmulticastloopudp-on'><code>uv.udp_set_multicast_loop(udp, on)</code></h3><blockquote><p><span>method form </span><code>udp:set_multicast_loop(on)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>udp</code><span>: </span><code>uv_udp_t userdata</code></p></li><li><p><code>on</code><span>: </span><code>boolean</code></p></li></ul><p><span>Set IP multicast loop flag. Makes multicast packets loop back to local</span>
<span>sockets.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvudpsetmulticastttludp-ttl'><code>uv.udp_set_multicast_ttl(udp, ttl)</code></h3><blockquote><p><span>method form </span><code>udp:set_multicast_ttl(ttl)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>udp</code><span>: </span><code>uv_udp_t userdata</code></p></li><li><p><code>ttl</code><span>: </span><code>integer</code></p></li></ul><p><span>Set the multicast ttl.</span></p><p><code>ttl</code><span> is an integer 1 through 255.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvudpsetmulticastinterfaceudp-interfaceaddr'><code>uv.udp_set_multicast_interface(udp, interface_addr)</code></h3><blockquote><p><span>method form </span><code>udp:set_multicast_interface(interface_addr)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>udp</code><span>: </span><code>uv_udp_t userdata</code></p></li><li><p><code>interface_addr</code><span>: </span><code>string</code></p></li></ul><p><span>Set the multicast interface to send or receive data on.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvudpsetbroadcastudp-on'><code>uv.udp_set_broadcast(udp, on)</code></h3><blockquote><p><span>method form </span><code>udp:set_broadcast(on)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>udp</code><span>: </span><code>uv_udp_t userdata</code></p></li><li><p><code>on</code><span>: </span><code>boolean</code></p></li></ul><p><span>Set broadcast on or off.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvudpsetttludp-ttl'><code>uv.udp_set_ttl(udp, ttl)</code></h3><blockquote><p><span>method form </span><code>udp:set_ttl(ttl)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>udp</code><span>: </span><code>uv_udp_t userdata</code></p></li><li><p><code>ttl</code><span>: </span><code>integer</code></p></li></ul><p><span>Set the time to live.</span></p><p><code>ttl</code><span> is an integer 1 through 255.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvudpsendudp-data-host-port-callback'><code>uv.udp_send(udp, data, host, port, callback)</code></h3><blockquote><p><span>method form </span><code>udp:send(data, host, port, callback)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>udp</code><span>: </span><code>uv_udp_t userdata</code></p></li><li><p><code>data</code><span>: </span><code>buffer</code></p></li><li><p><code>host</code><span>: </span><code>string</code></p></li><li><p><code>port</code><span>: </span><code>integer</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li></ul></li></ul><p><span>Send data over the UDP socket. If the socket has not previously been bound</span>
<span>with </span><code>uv.udp_bind()</code><span> it will be bound to </span><code>0.0.0.0</code><span> (the &quot;all interfaces&quot; IPv4</span>
<span>address) and a random port number.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_udp_send_t userdata</code><span> or </span><code>fail</code></p><h3 id='uvudptrysendudp-data-host-port'><code>uv.udp_try_send(udp, data, host, port)</code></h3><blockquote><p><span>method form </span><code>udp:try_send(data, host, port)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>udp</code><span>: </span><code>uv_udp_t userdata</code></p></li><li><p><code>data</code><span>: </span><code>buffer</code></p></li><li><p><code>host</code><span>: </span><code>string</code></p></li><li><p><code>port</code><span>: </span><code>integer</code></p></li></ul><p><span>Same as </span><code>uv.udp_send()</code><span>, but won&#39;t queue a send request if it can&#39;t be</span>
<span>completed immediately.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer</code><span> or </span><code>fail</code></p><h3 id='uvudptrysend2udp-messages-flags'><code>uv.udp_try_send2(udp, messages, flags)</code></h3><blockquote><p><span>method form </span><code>udp:try_send2(messages, flags)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>udp</code><span>: </span><code>uv_udp_t userdata</code></p></li><li><p><code>messages</code><span>: </span><code>table</code></p><ul><li><p><code>[1, 2, 3, ..., n]</code><span> : </span><code>table</code></p><ul><li><p><code>data</code><span> : </span><code>buffer</code></p></li><li><p><code>addr</code><span> : </span><code>table</code></p><ul><li><p><code>ip</code><span> : </span><code>string</code></p></li><li><p><code>port</code><span> : </span><code>integer</code></p></li></ul></li></ul></li></ul></li><li><p><code>flags</code><span>: </span><code>nil</code><span> (see below)</span></p></li><li><p><code>port</code><span>: </span><code>integer</code></p></li></ul><p><span>Like </span><code>uv.udp_try_send()</code><span>, but can send multiple datagrams.</span>
<span>Lightweight abstraction around </span><code>sendmmsg(2)</code><span>, with a </span><code>sendmsg(2)</code><span> fallback loop</span>
<span>for platforms that do not support the former. The </span><code>udp</code><span> handle must be fully</span>
<span>initialized, either from a </span><code>uv.udp_bind</code><span> call, another call that will bind</span>
<span>automatically (</span><code>udp_send</code><span>, </span><code>udp_try_send</code><span>, etc), or from </span><code>uv.udp_connect</code><span>.</span></p><p><code>messages</code><span> should be an array-like table, where </span><code>addr</code><span> must be specified</span>
<span>if the </span><code>udp</code><span> has not been connected via </span><code>udp_connect</code><span>. Otherwise, </span><code>addr</code>
<span>must be </span><code>nil</code><span>.</span></p><p><code>flags</code><span> is reserved for future extension and must currently be </span><code>nil</code><span> or </span><code>0</code><span> or</span>
<code>{}</code><span>.</span></p><p><span>Returns the number of messages sent successfully. An error will only be returned</span>
<span>if the first datagram failed to be sent.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer</code><span> or </span><code>fail</code></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- If client:connect(...) was not called</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">addr</span> = { <span class="cm-variable">ip</span> = <span class="cm-string">"127.0.0.1"</span>, <span class="cm-variable">port</span> = <span class="cm-number">1234</span> }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">client</span>:<span class="cm-variable">try_send2</span>({</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  { <span class="cm-variable">data</span> = <span class="cm-string">"Message 1"</span>, <span class="cm-variable">addr</span> = <span class="cm-variable">addr</span> },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  { <span class="cm-variable">data</span> = <span class="cm-string">"Message 2"</span>, <span class="cm-variable">addr</span> = <span class="cm-variable">addr</span> },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">})</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- If client:connect(...) was called</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">client</span>:<span class="cm-variable">try_send2</span>({</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  { <span class="cm-variable">data</span> = <span class="cm-string">"Message 1"</span> },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  { <span class="cm-variable">data</span> = <span class="cm-string">"Message 2"</span> },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 277px;"></div><div class="CodeMirror-gutters" style="display: none; height: 277px;"></div></div></div></pre><h3 id='uvudprecvstartudp-callback'><code>uv.udp_recv_start(udp, callback)</code></h3><blockquote><p><span>method form </span><code>udp:recv_start(callback)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>udp</code><span>: </span><code>uv_udp_t userdata</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>data</code><span>: </span><code>string</code><span> or </span><code>nil</code></p></li><li><p><code>addr</code><span>: </span><code>table</code><span> or </span><code>nil</code></p><ul><li><p><code>ip</code><span>: </span><code>string</code></p></li><li><p><code>port</code><span>: </span><code>integer</code></p></li><li><p><code>family</code><span>: </span><code>string</code></p></li></ul></li><li><p><code>flags</code><span>: </span><code>table</code></p><ul><li><p><code>partial</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li><li><p><code>mmsg_chunk</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul></li></ul><p><span>Prepare for receiving data. If the socket has not previously been bound with</span>
<code>uv.udp_bind()</code><span> it is bound to </span><code>0.0.0.0</code><span> (the &quot;all interfaces&quot; IPv4 address)</span>
<span>and a random port number.</span></p><p><span>See </span><a href='#constants' target='_blank'><span>Constants</span></a><span> for supported address </span><code>family</code><span> output values.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvudprecvstopudp'><code>uv.udp_recv_stop(udp)</code></h3><blockquote><p><span>method form </span><code>udp:recv_stop()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>udp</code><span>: </span><code>uv_udp_t userdata</code></p></li></ul><p><span>Stop listening for incoming datagrams.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvudpconnectudp-host-port'><code>uv.udp_connect(udp, host, port)</code></h3><blockquote><p><span>method form </span><code>udp:connect(host, port)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>udp</code><span>: </span><code>uv_udp_t userdata</code></p></li><li><p><code>host</code><span>: </span><code>string</code></p></li><li><p><code>port</code><span>: </span><code>integer</code></p></li></ul><p><span>Associate the UDP handle to a remote address and port, so every message sent by</span>
<span>this handle is automatically sent to that destination. Calling this function</span>
<span>with a NULL addr disconnects the handle. Trying to call </span><code>uv.udp_connect()</code><span> on an</span>
<span>already connected handle will result in an </span><code>EISCONN</code><span> error. Trying to disconnect</span>
<span>a handle that is not connected will return an </span><code>ENOTCONN</code><span> error.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h2 id='uvfseventt-----fs-event-handle'><code>uv_fs_event_t</code><span> — FS Event handle</span></h2><blockquote><p><a href='#uv_handle_t--base-handle' target='_blank'><code>uv_handle_t</code></a><span> functions also apply.</span></p></blockquote><p><span>FS Event handles allow the user to monitor a given path for changes, for</span>
<span>example, if the file was renamed or there was a generic change in it. This</span>
<span>handle uses the best backend for the job on each platform.</span></p><h3 id='uvnewfsevent'><code>uv.new_fs_event()</code></h3><p><span>Creates and initializes a new </span><code>uv_fs_event_t</code><span>. Returns the Lua userdata wrapping</span>
<span>it.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_fs_event_t userdata</code><span> or </span><code>fail</code></p><h3 id='uvfseventstartfsevent-path-flags-callback'><code>uv.fs_event_start(fs_event, path, flags, callback)</code></h3><blockquote><p><span>method form </span><code>fs_event:start(path, flags, callback)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>fs_event</code><span>: </span><code>uv_fs_event_t userdata</code></p></li><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>flags</code><span>: </span><code>table</code></p><ul><li><p><code>watch_entry</code><span>: </span><code>boolean</code><span> or </span><code>nil</code><span> (default: </span><code>false</code><span>)</span></p></li><li><p><code>stat</code><span>: </span><code>boolean</code><span> or </span><code>nil</code><span> (default: </span><code>false</code><span>)</span></p></li><li><p><code>recursive</code><span>: </span><code>boolean</code><span> or </span><code>nil</code><span> (default: </span><code>false</code><span>)</span></p></li></ul></li><li><p><code>callback</code><span>: </span><code>callable</code></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>filename</code><span>: </span><code>string</code></p></li><li><p><code>events</code><span>: </span><code>table</code></p><ul><li><p><code>change</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li><li><p><code>rename</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul></li></ul><p><span>Start the handle with the given callback, which will watch the specified path</span>
<span>for changes.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvfseventstop'><code>uv.fs_event_stop()</code></h3><blockquote><p><span>method form </span><code>fs_event:stop()</code></p></blockquote><p><span>Stop the handle, the callback will no longer be called.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvfseventgetpath'><code>uv.fs_event_getpath()</code></h3><blockquote><p><span>method form </span><code>fs_event:getpath()</code></p></blockquote><p><span>Get the path being monitored by the handle.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>string</code><span> or </span><code>fail</code></p><h2 id='uvfspollt-----fs-poll-handle'><code>uv_fs_poll_t</code><span> — FS Poll handle</span></h2><blockquote><p><a href='#uv_handle_t--base-handle' target='_blank'><code>uv_handle_t</code></a><span> functions also apply.</span></p></blockquote><p><span>FS Poll handles allow the user to monitor a given path for changes. Unlike</span>
<code>uv_fs_event_t</code><span>, fs poll handles use </span><code>stat</code><span> to detect when a file has changed so</span>
<span>they can work on file systems where fs event handles can&#39;t.</span></p><h3 id='uvnewfspoll'><code>uv.new_fs_poll()</code></h3><p><span>Creates and initializes a new </span><code>uv_fs_poll_t</code><span>. Returns the Lua userdata wrapping</span>
<span>it.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_fs_poll_t userdata</code><span> or </span><code>fail</code></p><h3 id='uvfspollstartfspoll-path-interval-callback'><code>uv.fs_poll_start(fs_poll, path, interval, callback)</code></h3><blockquote><p><span>method form </span><code>fs_poll:start(path, interval, callback)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>fs_poll</code><span>: </span><code>uv_fs_poll_t userdata</code></p></li><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>interval</code><span>: </span><code>integer</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>prev</code><span>: </span><code>table</code><span> or </span><code>nil</code><span> (see </span><code>uv.fs_stat</code><span>)</span></p></li><li><p><code>curr</code><span>: </span><code>table</code><span> or </span><code>nil</code><span> (see </span><code>uv.fs_stat</code><span>)</span></p></li></ul></li></ul><p><span>Check the file at </span><code>path</code><span> for changes every </span><code>interval</code><span> milliseconds.</span></p><p><strong><span>Note:</span></strong><span> For maximum portability, use multi-second intervals. Sub-second</span>
<span>intervals will not detect all changes on many file systems.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvfspollstop'><code>uv.fs_poll_stop()</code></h3><blockquote><p><span>method form </span><code>fs_poll:stop()</code></p></blockquote><p><span>Stop the handle, the callback will no longer be called.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvfspollgetpath'><code>uv.fs_poll_getpath()</code></h3><blockquote><p><span>method form </span><code>fs_poll:getpath()</code></p></blockquote><p><span>Get the path being monitored by the handle.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>string</code><span> or </span><code>fail</code></p><h2 id='file-system-operations'><span>File system operations</span></h2><p><span>Most file system functions can operate synchronously or asynchronously. When a synchronous version is called (by omitting a callback), the function will</span>
<span>immediately return the results of the FS call. When an asynchronous version is</span>
<span>called (by providing a callback), the function will immediately return a</span>
<code>uv_fs_t userdata</code><span> and asynchronously execute its callback; if an error is encountered, the first and only argument passed to the callback will be the </span><code>err</code><span> error string; if the operation completes successfully, the first argument will be </span><code>nil</code><span> and the remaining arguments will be the results of the FS call.</span></p><p><span>Synchronous and asynchronous versions of </span><code>readFile</code><span> (with naive error handling)</span>
<span>are implemented below as an example:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-keyword">function</span> <span class="cm-variable">readFileSync</span>(<span class="cm-variable">path</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">local</span> <span class="cm-variable">fd</span> = <span class="cm-builtin">assert</span>(<span class="cm-variable">uv.fs_open</span>(<span class="cm-variable">path</span>, <span class="cm-string">"r"</span>, <span class="cm-number">438</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">local</span> <span class="cm-variable">stat</span> = <span class="cm-builtin">assert</span>(<span class="cm-variable">uv.fs_fstat</span>(<span class="cm-variable">fd</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">local</span> <span class="cm-variable">data</span> = <span class="cm-builtin">assert</span>(<span class="cm-variable">uv.fs_read</span>(<span class="cm-variable">fd</span>, <span class="cm-variable">stat.size</span>, <span class="cm-number">0</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">assert</span>(<span class="cm-variable">uv.fs_close</span>(<span class="cm-variable">fd</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">data</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">data</span> = <span class="cm-variable">readFileSync</span>(<span class="cm-string">"main.lua"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">print</span>(<span class="cm-string">"synchronous read"</span>, <span class="cm-variable">data</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 230px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-keyword">function</span> <span class="cm-variable">readFile</span>(<span class="cm-variable">path</span>, <span class="cm-variable">callback</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">uv.fs_open</span>(<span class="cm-variable">path</span>, <span class="cm-string">"r"</span>, <span class="cm-number">438</span>, <span class="cm-keyword">function</span>(<span class="cm-variable">err</span>, <span class="cm-variable">fd</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-builtin">assert</span>(<span class="cm-keyword">not</span> <span class="cm-variable">err</span>, <span class="cm-variable">err</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">uv.fs_fstat</span>(<span class="cm-variable">fd</span>, <span class="cm-keyword">function</span>(<span class="cm-variable">err</span>, <span class="cm-variable">stat</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-builtin">assert</span>(<span class="cm-keyword">not</span> <span class="cm-variable">err</span>, <span class="cm-variable">err</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">uv.fs_read</span>(<span class="cm-variable">fd</span>, <span class="cm-variable">stat.size</span>, <span class="cm-number">0</span>, <span class="cm-keyword">function</span>(<span class="cm-variable">err</span>, <span class="cm-variable">data</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-builtin">assert</span>(<span class="cm-keyword">not</span> <span class="cm-variable">err</span>, <span class="cm-variable">err</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">uv.fs_close</span>(<span class="cm-variable">fd</span>, <span class="cm-keyword">function</span>(<span class="cm-variable">err</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-builtin">assert</span>(<span class="cm-keyword">not</span> <span class="cm-variable">err</span>, <span class="cm-variable">err</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">callback</span>(<span class="cm-variable">data</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">end</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">end</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">end</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">end</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">readFile</span>(<span class="cm-string">"main.lua"</span>, <span class="cm-keyword">function</span>(<span class="cm-variable">data</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">print</span>(<span class="cm-string">"asynchronous read"</span>, <span class="cm-variable">data</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 438px;"></div><div class="CodeMirror-gutters" style="display: none; height: 438px;"></div></div></div></pre><h3 id='uvfsclosefd-callback'><code>uv.fs_close(fd, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>fd</code><span>: </span><code>integer</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>success</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>close(2)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsopenpath-flags-mode-callback'><code>uv.fs_open(path, flags, mode, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>flags</code><span>: </span><code>string</code><span> or </span><code>integer</code></p></li><li><p><code>mode</code><span>: </span><code>integer</code><span> (octal </span><code>chmod(1)</code><span> mode, e.g. </span><code>tonumber(&#39;644&#39;, 8)</code><span>)</span></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>fd</code><span>: </span><code>integer</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>open(2)</code><span>. Access </span><code>flags</code><span> may be an integer or one of: </span><code>&quot;r&quot;</code><span>,</span>
<code>&quot;rs&quot;</code><span>, </span><code>&quot;sr&quot;</code><span>, </span><code>&quot;r+&quot;</code><span>, </span><code>&quot;rs+&quot;</code><span>, </span><code>&quot;sr+&quot;</code><span>, </span><code>&quot;w&quot;</code><span>, </span><code>&quot;wx&quot;</code><span>, </span><code>&quot;xw&quot;</code><span>, </span><code>&quot;w+&quot;</code><span>,</span>
<code>&quot;wx+&quot;</code><span>, </span><code>&quot;xw+&quot;</code><span>, </span><code>&quot;a&quot;</code><span>, </span><code>&quot;ax&quot;</code><span>, </span><code>&quot;xa&quot;</code><span>, </span><code>&quot;a+&quot;</code><span>, </span><code>&quot;ax+&quot;</code><span>, or &quot;</span><code>xa+</code><span>&quot;.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>integer</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><p><strong><span>Note:</span></strong><span> On Windows, libuv uses </span><code>CreateFileW</code><span> and thus the file is always</span>
<span>opened in binary mode. Because of this, the </span><code>O_BINARY</code><span> and </span><code>O_TEXT</code><span> flags are</span>
<span>not supported.</span></p><h3 id='uvfsreadfd-size-offset-callback'><code>uv.fs_read(fd, size, [offset], [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>fd</code><span>: </span><code>integer</code></p></li><li><p><code>size</code><span>: </span><code>integer</code></p></li><li><p><code>offset</code><span>: </span><code>integer</code><span> or </span><code>nil</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>data</code><span>: </span><code>string</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>preadv(2)</code><span>. Returns any data. An empty string indicates EOF.</span></p><p><span>If </span><code>offset</code><span> is nil or omitted, it will default to </span><code>-1</code><span>, which indicates &#39;use and update the current file offset.&#39;</span></p><p><strong><span>Note:</span></strong><span> When </span><code>offset</code><span> is &gt;= 0, the current file offset will not be updated by the read.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>string</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsunlinkpath-callback'><code>uv.fs_unlink(path, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>success</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>unlink(2)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfswritefd-data-offset-callback'><code>uv.fs_write(fd, data, [offset], [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>fd</code><span>: </span><code>integer</code></p></li><li><p><code>data</code><span>: </span><code>buffer</code></p></li><li><p><code>offset</code><span>: </span><code>integer</code><span> or </span><code>nil</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>bytes</code><span>: </span><code>integer</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>pwritev(2)</code><span>. Returns the number of bytes written.</span></p><p><span>If </span><code>offset</code><span> is nil or omitted, it will default to </span><code>-1</code><span>, which indicates &#39;use and update the current file offset.&#39;</span></p><p><strong><span>Note:</span></strong><span> When </span><code>offset</code><span> is &gt;= 0, the current file offset will not be updated by the write.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>integer</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsmkdirpath-mode-callback'><code>uv.fs_mkdir(path, mode, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>mode</code><span>: </span><code>integer</code><span> (octal </span><code>chmod(1)</code><span> mode, e.g. </span><code>tonumber(&#39;755&#39;, 8)</code><span>)</span></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>success</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>mkdir(2)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsmkdtemptemplate-callback'><code>uv.fs_mkdtemp(template, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>template</code><span>: </span><code>string</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>path</code><span>: </span><code>string</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>mkdtemp(3)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>string</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsmkstemptemplate-callback'><code>uv.fs_mkstemp(template, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>template</code><span>: </span><code>string</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>fd</code><span>: </span><code>integer</code><span> or </span><code>nil</code></p></li><li><p><code>path</code><span>: </span><code>string</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>mkstemp(3)</code><span>. Returns a temporary file handle and filename.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>integer, string</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsrmdirpath-callback'><code>uv.fs_rmdir(path, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>success</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>rmdir(2)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsscandirpath-callback'><code>uv.fs_scandir(path, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>success</code><span>: </span><code>uv_fs_t userdata</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>scandir(3)</code><span>, with a slightly different API. Returns a handle that</span>
<span>the user can pass to </span><code>uv.fs_scandir_next()</code><span>.</span></p><p><strong><span>Note:</span></strong><span> This function can be used synchronously or asynchronously. The request</span>
<span>userdata is always synchronously returned regardless of whether a callback is</span>
<span>provided and the same userdata is passed to the callback if it is provided.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>uv_fs_t userdata</code><span> or </span><code>fail</code></p><h3 id='uvfsscandirnextfs'><code>uv.fs_scandir_next(fs)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>fs</code><span>: </span><code>uv_fs_t userdata</code></p></li></ul><p><span>Called on a </span><code>uv_fs_t</code><span> returned by </span><code>uv.fs_scandir()</code><span> to get the next directory</span>
<span>entry data as a </span><code>name, type</code><span> pair. When there are no more entries, </span><code>nil</code><span> is</span>
<span>returned.</span></p><p><strong><span>Note:</span></strong><span> This function only has a synchronous version. See </span><code>uv.fs_opendir</code><span> and</span>
<span>its related functions for an asynchronous version.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>string, string</code><span> or </span><code>nil</code><span> or </span><code>fail</code></p><h3 id='uvfsstatpath-callback'><code>uv.fs_stat(path, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>stat</code><span>: </span><code>table</code><span> or </span><code>nil</code><span> (see below)</span></p></li></ul></li></ul><p><span>Equivalent to </span><code>stat(2)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>table</code><span> or </span><code>fail</code></p><ul><li><p><code>dev</code><span> : </span><code>integer</code></p></li><li><p><code>mode</code><span> : </span><code>integer</code></p></li><li><p><code>nlink</code><span> : </span><code>integer</code></p></li><li><p><code>uid</code><span> : </span><code>integer</code></p></li><li><p><code>gid</code><span> : </span><code>integer</code></p></li><li><p><code>rdev</code><span> : </span><code>integer</code></p></li><li><p><code>ino</code><span> : </span><code>integer</code></p></li><li><p><code>size</code><span> : </span><code>integer</code></p></li><li><p><code>blksize</code><span> : </span><code>integer</code></p></li><li><p><code>blocks</code><span> : </span><code>integer</code></p></li><li><p><code>flags</code><span> : </span><code>integer</code></p></li><li><p><code>gen</code><span> : </span><code>integer</code></p></li><li><p><code>atime</code><span> : </span><code>table</code></p><ul><li><p><code>sec</code><span> : </span><code>integer</code></p></li><li><p><code>nsec</code><span> : </span><code>integer</code></p></li></ul></li><li><p><code>mtime</code><span> : </span><code>table</code></p><ul><li><p><code>sec</code><span> : </span><code>integer</code></p></li><li><p><code>nsec</code><span> : </span><code>integer</code></p></li></ul></li><li><p><code>ctime</code><span> : </span><code>table</code></p><ul><li><p><code>sec</code><span> : </span><code>integer</code></p></li><li><p><code>nsec</code><span> : </span><code>integer</code></p></li></ul></li><li><p><code>birthtime</code><span> : </span><code>table</code></p><ul><li><p><code>sec</code><span> : </span><code>integer</code></p></li><li><p><code>nsec</code><span> : </span><code>integer</code></p></li></ul></li><li><p><code>type</code><span> : </span><code>string</code></p></li></ul><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsfstatfd-callback'><code>uv.fs_fstat(fd, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>fd</code><span>: </span><code>integer</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>stat</code><span>: </span><code>table</code><span> or </span><code>nil</code><span> (see </span><code>uv.fs_stat</code><span>)</span></p></li></ul></li></ul><p><span>Equivalent to </span><code>fstat(2)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>table</code><span> or </span><code>fail</code><span> (see </span><code>uv.fs_stat</code><span>)</span></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfslstatpath-callback'><code>uv.fs_lstat(path, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>stat</code><span>: </span><code>table</code><span> or </span><code>nil</code><span> (see </span><code>uv.fs_stat</code><span>)</span></p></li></ul></li></ul><p><span>Equivalent to </span><code>lstat(2)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>table</code><span> or </span><code>fail</code><span> (see </span><code>uv.fs_stat</code><span>)</span></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsrenamepath-newpath-callback'><code>uv.fs_rename(path, new_path, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>new_path</code><span>: </span><code>string</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>success</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>rename(2)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsfsyncfd-callback'><code>uv.fs_fsync(fd, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>fd</code><span>: </span><code>integer</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>success</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>fsync(2)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsfdatasyncfd-callback'><code>uv.fs_fdatasync(fd, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>fd</code><span>: </span><code>integer</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>success</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>fdatasync(2)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsftruncatefd-offset-callback'><code>uv.fs_ftruncate(fd, offset, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>fd</code><span>: </span><code>integer</code></p></li><li><p><code>offset</code><span>: </span><code>integer</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>success</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>ftruncate(2)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfssendfileoutfd-infd-inoffset-size-callback'><code>uv.fs_sendfile(out_fd, in_fd, in_offset, size, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>out_fd</code><span>: </span><code>integer</code></p></li><li><p><code>in_fd</code><span>: </span><code>integer</code></p></li><li><p><code>in_offset</code><span>: </span><code>integer</code></p></li><li><p><code>size</code><span>: </span><code>integer</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>bytes</code><span>: </span><code>integer</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Limited equivalent to </span><code>sendfile(2)</code><span>. Returns the number of bytes written.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>integer</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsaccesspath-mode-callback'><code>uv.fs_access(path, mode, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>mode</code><span>: </span><code>string</code><span>  (a combination of the </span><code>&#39;r&#39;</code><span>, </span><code>&#39;w&#39;</code><span> and </span><code>&#39;x&#39;</code><span> characters denoting the symbolic mode as per </span><code>chmod(1)</code><span>)</span></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>permission</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>access(2)</code><span> on Unix. Windows uses </span><code>GetFileAttributesW()</code><span>. Access</span>
<code>mode</code><span> can be an integer or a string containing </span><code>&quot;R&quot;</code><span> or </span><code>&quot;W&quot;</code><span> or </span><code>&quot;X&quot;</code><span>.</span>
<span>Returns </span><code>true</code><span> or </span><code>false</code><span> indicating access permission.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfschmodpath-mode-callback'><code>uv.fs_chmod(path, mode, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>mode</code><span>: </span><code>integer</code><span> (octal </span><code>chmod(1)</code><span> mode, e.g. </span><code>tonumber(&#39;644&#39;, 8)</code><span>)</span></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>success</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>chmod(2)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsfchmodfd-mode-callback'><code>uv.fs_fchmod(fd, mode, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>fd</code><span>: </span><code>integer</code></p></li><li><p><code>mode</code><span>: </span><code>integer</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>success</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>fchmod(2)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsutimepath-atime-mtime-callback'><code>uv.fs_utime(path, atime, mtime, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>atime</code><span>: </span><code>number</code></p></li><li><p><code>mtime</code><span>: </span><code>number</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>success</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>utime(2)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsfutimefd-atime-mtime-callback'><code>uv.fs_futime(fd, atime, mtime, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>fd</code><span>: </span><code>integer</code></p></li><li><p><code>atime</code><span>: </span><code>number</code></p></li><li><p><code>mtime</code><span>: </span><code>number</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>success</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>futime(2)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfslutimepath-atime-mtime-callback'><code>uv.fs_lutime(path, atime, mtime, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>atime</code><span>: </span><code>number</code></p></li><li><p><code>mtime</code><span>: </span><code>number</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>success</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>lutime(2)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfslinkpath-newpath-callback'><code>uv.fs_link(path, new_path, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>new_path</code><span>: </span><code>string</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>success</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>link(2)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfssymlinkpath-newpath-flags-callback'><code>uv.fs_symlink(path, new_path, [flags], [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>new_path</code><span>: </span><code>string</code></p></li><li><p><code>flags</code><span>: </span><code>table</code><span>, </span><code>integer</code><span>, or </span><code>nil</code></p><ul><li><p><code>dir</code><span>: </span><code>boolean</code></p></li><li><p><code>junction</code><span>: </span><code>boolean</code></p></li></ul></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>success</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>symlink(2)</code><span>. If the </span><code>flags</code><span> parameter is omitted, then the 3rd parameter will be treated as the </span><code>callback</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsreadlinkpath-callback'><code>uv.fs_readlink(path, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>path</code><span>: </span><code>string</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>readlink(2)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>string</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsrealpathpath-callback'><code>uv.fs_realpath(path, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>path</code><span>: </span><code>string</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>realpath(3)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>string</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfschownpath-uid-gid-callback'><code>uv.fs_chown(path, uid, gid, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>uid</code><span>: </span><code>integer</code></p></li><li><p><code>gid</code><span>: </span><code>integer</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>success</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>chown(2)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsfchownfd-uid-gid-callback'><code>uv.fs_fchown(fd, uid, gid, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>fd</code><span>: </span><code>integer</code></p></li><li><p><code>uid</code><span>: </span><code>integer</code></p></li><li><p><code>gid</code><span>: </span><code>integer</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>success</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>fchown(2)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfslchownfd-uid-gid-callback'><code>uv.fs_lchown(fd, uid, gid, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>fd</code><span>: </span><code>integer</code></p></li><li><p><code>uid</code><span>: </span><code>integer</code></p></li><li><p><code>gid</code><span>: </span><code>integer</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>success</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>lchown(2)</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfscopyfilepath-newpath-flags-callback'><code>uv.fs_copyfile(path, new_path, [flags], [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>new_path</code><span>: </span><code>string</code></p></li><li><p><code>flags</code><span>: </span><code>table</code><span>, </span><code>integer</code><span>, or </span><code>nil</code></p><ul><li><p><code>excl</code><span>: </span><code>boolean</code></p></li><li><p><code>ficlone</code><span>: </span><code>boolean</code></p></li><li><p><code>ficlone_force</code><span>: </span><code>boolean</code></p></li></ul></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>success</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Copies a file from path to new_path. If the </span><code>flags</code><span> parameter is omitted, then the 3rd parameter will be treated as the </span><code>callback</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsopendirpath-callback-entries'><code>uv.fs_opendir(path, [callback, [entries]])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>dir</code><span>: </span><code>luv_dir_t userdata</code><span> or </span><code>nil</code></p></li></ul></li><li><p><code>entries</code><span>: </span><code>integer</code><span> or </span><code>nil</code></p></li></ul><p><span>Opens path as a directory stream. Returns a handle that the user can pass to</span>
<code>uv.fs_readdir()</code><span>. The </span><code>entries</code><span> parameter defines the maximum number of entries</span>
<span>that should be returned by each call to </span><code>uv.fs_readdir()</code><span>.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>luv_dir_t userdata</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsreaddirdir-callback'><code>uv.fs_readdir(dir, [callback])</code></h3><blockquote><p><span>method form </span><code>dir:readdir([callback])</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>dir</code><span>: </span><code>luv_dir_t userdata</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>entries</code><span>: </span><code>table</code><span> or </span><code>nil</code><span> (see below)</span></p></li></ul></li></ul><p><span>Iterates over the directory stream </span><code>luv_dir_t</code><span> returned by a successful</span>
<code>uv.fs_opendir()</code><span> call. A table of data tables is returned where the number</span>
<span>of entries </span><code>n</code><span> is equal to or less than the </span><code>entries</code><span> parameter used in</span>
<span>the associated </span><code>uv.fs_opendir()</code><span> call.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>table</code><span> or </span><code>fail</code></p><ul><li><p><code>[1, 2, 3, ..., n]</code><span> : </span><code>table</code></p><ul><li><p><code>name</code><span> : </span><code>string</code></p></li><li><p><code>type</code><span> : </span><code>string</code></p></li></ul></li></ul><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsclosedirdir-callback'><code>uv.fs_closedir(dir, [callback])</code></h3><blockquote><p><span>method form </span><code>dir:closedir([callback])</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>dir</code><span>: </span><code>luv_dir_t userdata</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>success</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Closes a directory stream returned by a successful </span><code>uv.fs_opendir()</code><span> call.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_fs_t userdata</code></p><h3 id='uvfsstatfspath-callback'><code>uv.fs_statfs(path, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>path</code><span>: </span><code>string</code></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>table</code><span> or </span><code>nil</code><span> (see below)</span></p></li></ul></li></ul><p><span>Equivalent to </span><code>statfs(2)</code><span>.</span></p><p><strong><span>Returns</span></strong><span> </span><code>table</code><span> or </span><code>nil</code></p><ul><li><p><code>type</code><span> : </span><code>integer</code></p></li><li><p><code>bsize</code><span> : </span><code>integer</code></p></li><li><p><code>blocks</code><span> : </span><code>integer</code></p></li><li><p><code>bfree</code><span> : </span><code>integer</code></p></li><li><p><code>bavail</code><span> : </span><code>integer</code></p></li><li><p><code>files</code><span> : </span><code>integer</code></p></li><li><p><code>ffree</code><span> : </span><code>integer</code></p></li></ul><h2 id='thread-pool-work-scheduling'><span>Thread pool work scheduling</span></h2><p><span>Libuv provides a threadpool which can be used to run user code and get notified</span>
<span>in the loop thread. This threadpool is internally used to run all file system</span>
<span>operations, as well as </span><code>getaddrinfo</code><span> and </span><code>getnameinfo</code><span> requests.</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-keyword">function</span> <span class="cm-variable">work_callback</span>(<span class="cm-variable">a</span>, <span class="cm-variable">b</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">a</span> + <span class="cm-variable">b</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-keyword">function</span> <span class="cm-variable">after_work_callback</span>(<span class="cm-variable">c</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">print</span>(<span class="cm-string">"The result is: "</span> .. <span class="cm-variable">c</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">local</span> <span class="cm-variable">work</span> = <span class="cm-variable">uv.new_work</span>(<span class="cm-variable">work_callback</span>, <span class="cm-variable">after_work_callback</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">work</span>:<span class="cm-variable">queue</span>(<span class="cm-number">1</span>, <span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- output: "The result is: 3"</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 300px;"></div><div class="CodeMirror-gutters" style="display: none; height: 300px;"></div></div></div></pre><h3 id='uvnewworkworkcallback-afterworkcallback'><code>uv.new_work(work_callback, after_work_callback)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>work_callback</code><span>: </span><code>function</code><span> or </span><code>string</code></p><ul><li><p><code>...</code><span>: </span><code>threadargs</code><span> passed to/from </span><code>uv.queue_work(work_ctx, ...)</code></p></li></ul></li><li><p><code>after_work_callback</code><span>: </span><code>function</code></p><ul><li><p><code>...</code><span>: </span><code>threadargs</code><span> returned from </span><code>work_callback</code></p></li></ul></li></ul><p><span>Creates and initializes a new </span><code>luv_work_ctx_t</code><span> (not </span><code>uv_work_t</code><span>).</span>
<code>work_callback</code><span> is a Lua function or a string containing Lua code or bytecode dumped from a function.</span>
<span>Returns the Lua userdata wrapping it.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>luv_work_ctx_t userdata</code></p><h3 id='uvqueueworkworkctx-'><code>uv.queue_work(work_ctx, ...)</code></h3><blockquote><p><span>method form </span><code>work_ctx:queue(...)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>work_ctx</code><span>: </span><code>luv_work_ctx_t userdata</code></p></li><li><p><code>...</code><span>: </span><code>threadargs</code></p></li></ul><p><span>Queues a work request which will run </span><code>work_callback</code><span> in a new Lua state in a</span>
<span>thread from the threadpool with any additional arguments from </span><code>...</code><span>. Values</span>
<span>returned from </span><code>work_callback</code><span> are passed to </span><code>after_work_callback</code><span>, which is</span>
<span>called in the main loop thread.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><h2 id='dns-utility-functions'><span>DNS utility functions</span></h2><h3 id='uvgetaddrinfohost-service-hints-callback'><code>uv.getaddrinfo(host, service, [hints, [callback]])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>host</code><span>: </span><code>string</code><span> or </span><code>nil</code></p></li><li><p><code>service</code><span>: </span><code>string</code><span> or </span><code>nil</code></p></li><li><p><code>hints</code><span>: </span><code>table</code><span> or </span><code>nil</code></p><ul><li><p><code>family</code><span>: </span><code>string</code><span> or </span><code>integer</code><span> or </span><code>nil</code></p></li><li><p><code>socktype</code><span>: </span><code>string</code><span> or </span><code>integer</code><span> or </span><code>nil</code></p></li><li><p><code>protocol</code><span>: </span><code>string</code><span> or </span><code>integer</code><span> or </span><code>nil</code></p></li><li><p><code>addrconfig</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li><li><p><code>v4mapped</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li><li><p><code>all</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li><li><p><code>numerichost</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li><li><p><code>passive</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li><li><p><code>numericserv</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li><li><p><code>canonname</code><span>: </span><code>boolean</code><span> or </span><code>nil</code></p></li></ul></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>addresses</code><span>: </span><code>table</code><span> or </span><code>nil</code><span> (see below)</span></p></li></ul></li></ul><p><span>Equivalent to </span><code>getaddrinfo(3)</code><span>. Either </span><code>node</code><span> or </span><code>service</code><span> may be </span><code>nil</code><span> but not</span>
<span>both.</span></p><p><span>See </span><a href='#constants' target='_blank'><span>Constants</span></a><span> for supported address </span><code>family</code><span> input and output values.</span></p><p><span>See </span><a href='#constants' target='_blank'><span>Constants</span></a><span> for supported </span><code>socktype</code><span> input and output values.</span></p><p><span>When </span><code>protocol</code><span> is set to 0 or nil, it will be automatically chosen based on the</span>
<span>socket&#39;s domain and type. When </span><code>protocol</code><span> is specified as a string, it will be</span>
<span>looked up using the </span><code>getprotobyname(3)</code><span> function. Examples: </span><code>&quot;ip&quot;</code><span>, </span><code>&quot;icmp&quot;</code><span>,</span>
<code>&quot;tcp&quot;</code><span>, </span><code>&quot;udp&quot;</code><span>, etc.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>table</code><span> or </span><code>fail</code></p><ul><li><p><code>[1, 2, 3, ..., n]</code><span> : </span><code>table</code></p><ul><li><p><code>addr</code><span> : </span><code>string</code></p></li><li><p><code>family</code><span> : </span><code>string</code></p></li><li><p><code>port</code><span> : </span><code>integer</code><span> or </span><code>nil</code></p></li><li><p><code>socktype</code><span> : </span><code>string</code></p></li><li><p><code>protocol</code><span> : </span><code>string</code></p></li><li><p><code>canonname</code><span> : </span><code>string</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_getaddrinfo_t userdata</code><span> or </span><code>fail</code></p><h3 id='uvgetnameinfoaddress-callback'><code>uv.getnameinfo(address, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>address</code><span>: </span><code>table</code></p><ul><li><p><code>ip</code><span>: </span><code>string</code><span> or </span><code>nil</code></p></li><li><p><code>port</code><span>: </span><code>integer</code><span> or </span><code>nil</code></p></li><li><p><code>family</code><span>: </span><code>string</code><span> or </span><code>integer</code><span> or </span><code>nil</code></p></li></ul></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>host</code><span>: </span><code>string</code><span> or </span><code>nil</code></p></li><li><p><code>service</code><span>: </span><code>string</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Equivalent to </span><code>getnameinfo(3)</code><span>.</span></p><p><span>See </span><a href='#constants' target='_blank'><span>Constants</span></a><span> for supported address </span><code>family</code><span> input values.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>string, string</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>uv_getnameinfo_t userdata</code><span> or </span><code>fail</code></p><h2 id='threading-and-synchronization-utilities'><span>Threading and synchronization utilities</span></h2><p><span>Libuv provides cross-platform implementations for multiple threading and</span>
<span> synchronization primitives. The API largely follows the pthreads API.</span></p><h3 id='uvnewthreadoptions-entry-'><code>uv.new_thread([options], entry, ...)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>options</code><span>: </span><code>table</code><span> or </span><code>nil</code></p><ul><li><p><code>stack_size</code><span>: </span><code>integer</code><span> or </span><code>nil</code></p></li></ul></li><li><p><code>entry</code><span>: </span><code>function</code><span> or </span><code>string</code></p></li><li><p><code>...</code><span>: </span><code>threadargs</code><span> passed to </span><code>entry</code></p></li></ul><p><span>Creates and initializes a </span><code>luv_thread_t</code><span> (not </span><code>uv_thread_t</code><span>). Returns the Lua</span>
<span>userdata wrapping it and asynchronously executes </span><code>entry</code><span>, which can be either</span>
<span>a Lua function or a string containing Lua code or bytecode dumped from a function. Additional arguments </span><code>...</code>
<span>are passed to the </span><code>entry</code><span> function and an optional </span><code>options</code><span> table may be</span>
<span>provided. Currently accepted </span><code>option</code><span> fields are </span><code>stack_size</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>luv_thread_t userdata</code><span> or </span><code>fail</code></p><p><strong><span>Note:</span></strong><span> unsafe, please make sure the thread end of life before Lua state close.</span></p><h3 id='uvthreadequalthread-otherthread'><code>uv.thread_equal(thread, other_thread)</code></h3><blockquote><p><span>method form </span><code>thread:equal(other_thread)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>thread</code><span>: </span><code>luv_thread_t userdata</code></p></li><li><p><code>other_thread</code><span>: </span><code>luv_thread_t userdata</code></p></li></ul><p><span>Returns a boolean indicating whether two threads are the same. This function is</span>
<span>equivalent to the </span><code>__eq</code><span> metamethod.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>boolean</code></p><h3 id='uvthreadsetaffinitythread-affinity-getoldaffinity'><code>uv.thread_setaffinity(thread, affinity, [get_old_affinity])</code></h3><blockquote><p><span>method form </span><code>thread:setaffinity(affinity, [get_old_affinity])</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>thread</code><span>: </span><code>luv_thread_t userdata</code></p></li><li><p><code>affinity</code><span>: </span><code>table</code></p><ul><li><p><code>[1, 2, 3, ..., n]</code><span> : </span><code>boolean</code></p></li></ul></li><li><p><code>get_old_affinity</code><span>: </span><code>boolean</code></p></li></ul><p><span>Sets the specified thread&#39;s affinity setting.</span></p><p><code>affinity</code><span> must be a table where each of the keys are a CPU number and the</span>
<span>values are booleans that represent whether the </span><code>thread</code><span> should be eligible to</span>
<span>run on that CPU. If the length of the </span><code>affinity</code><span> table is not greater than or</span>
<span>equal to </span><code>uv.cpumask_size()</code><span>, any CPU numbers missing from the table will have</span>
<span>their affinity set to </span><code>false</code><span>. If setting the affinity of more than</span>
<code>uv.cpumask_size()</code><span> CPUs is desired, </span><code>affinity</code><span> must be an array-like table</span>
<span>with no gaps, since </span><code>#affinity</code><span> will be used as the </span><code>cpumask_size</code><span> if it is</span>
<span>greater than </span><code>uv.cpumask_size()</code><span>.</span></p><p><span>If </span><code>get_old_affinity</code><span> is </span><code>true</code><span>, the previous affinity settings for the </span><code>thread</code>
<span>will be returned. Otherwise, </span><code>true</code><span> is returned after a successful call.</span></p><p><strong><span>Note:</span></strong><span> Thread affinity setting is not atomic on Windows. Unsupported on macOS.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>table</code><span> or </span><code>boolean</code><span> or </span><code>fail</code></p><ul><li><p><code>[1, 2, 3, ..., n]</code><span> : </span><code>boolean</code></p></li></ul><h3 id='uvthreadgetaffinitythread-masksize'><code>uv.thread_getaffinity(thread, [mask_size])</code></h3><blockquote><p><span>method form </span><code>thread:getaffinity([mask_size])</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>thread</code><span>: </span><code>luv_thread_t userdata</code></p></li><li><p><code>mask_size</code><span>: </span><code>integer</code></p></li></ul><p><span>Gets the specified thread&#39;s affinity setting.</span></p><p><span>If </span><code>mask_size</code><span> is provided, it must be greater than or equal to</span>
<code>uv.cpumask_size()</code><span>. If the </span><code>mask_size</code><span> parameter is omitted, then the return</span>
<span>of </span><code>uv.cpumask_size()</code><span> will be used. Returns an array-like table where each of</span>
<span>the keys correspond to a CPU number and the values are booleans that represent</span>
<span>whether the </span><code>thread</code><span> is eligible to run on that CPU.</span></p><p><strong><span>Note:</span></strong><span> Thread affinity getting is not atomic on Windows. Unsupported on macOS.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>table</code><span> or </span><code>fail</code></p><ul><li><p><code>[1, 2, 3, ..., n]</code><span> : </span><code>boolean</code></p></li></ul><h3 id='uvthreadgetcpu'><code>uv.thread_getcpu()</code></h3><p><span>Gets the CPU number on which the calling thread is running.</span></p><p><strong><span>Note:</span></strong><span> The first CPU will be returned as the number 1, not 0. This allows for</span>
<span>the number to correspond with the table keys used in </span><code>uv.thread_getaffinity</code><span> and</span>
<code>uv.thread_setaffinity</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer</code><span> or </span><code>fail</code></p><h3 id='uvthreadsetprioritythread-priority'><code>uv.thread_setpriority(thread, priority)</code></h3><blockquote><p><span>method form </span><code>thread:setpriority(priority)</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>thread</code><span>: </span><code>luv_thread_t userdata</code></p></li><li><p><code>priority</code><span>: </span><code>number</code></p></li></ul><p><span>Sets the specified thread&#39;s scheduling priority setting. It requires elevated</span>
<span>privilege to set specific priorities on some platforms.</span></p><p><span>The priority can be set to the following constants.</span></p><ul><li><p><span>uv.constants.THREAD_PRIORITY_HIGHEST</span></p></li><li><p><span>uv.constants.THREAD_PRIORITY_ABOVE_NORMAL</span></p></li><li><p><span>uv.constants.THREAD_PRIORITY_NORMAL</span></p></li><li><p><span>uv.constants.THREAD_PRIORITY_BELOW_NORMAL</span></p></li><li><p><span>uv.constants.THREAD_PRIORITY_LOWEST</span></p></li></ul><p><strong><span>Returns:</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><h3 id='`uvthreadgetprioritythread'><span>`uv.thread_getpriority(thread)</span></h3><blockquote><p><span>method form </span><code>thread:getpriority()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>thread</code><span>: </span><code>luv_thread_t userdata</code></p></li></ul><p><span>Gets the  thread&#39;s priority setting.</span></p><p><span>Retrieves the scheduling priority of the specified thread. The returned priority</span>
<span>value is platform dependent.</span></p><p><span>For Linux, when schedule policy is SCHED_OTHER (default), priority is 0.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>number</code><span> or </span><code>fail</code></p><h3 id='uvthreadself'><code>uv.thread_self()</code></h3><p><span>Returns the handle for the thread in which this is called.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>luv_thread_t</code></p><h3 id='uvthreadjointhread'><code>uv.thread_join(thread)</code></h3><blockquote><p><span>method form </span><code>thread:join()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>thread</code><span>: </span><code>luv_thread_t userdata</code></p></li></ul><p><span>Waits for the </span><code>thread</code><span> to finish executing its entry function.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><h3 id='uvthreaddetachthread'><code>uv.thread_detach(thread)</code></h3><blockquote><p><span>method form </span><code>thread:detach()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>thread</code><span>: </span><code>luv_thread_t userdata</code></p></li></ul><p><span>Detaches a thread. Detached threads automatically release their resources upon</span>
<span>termination, eliminating the need for the application to call </span><code>uv.thread_join</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><h3 id='uvthreadsetnamename'><code>uv.thread_setname(name)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>name</code><span>: </span><code>string</code></p></li></ul><p><span>Sets the name of the current thread. Different platforms define different limits</span>
<span>on the max number of characters a thread name can be: Linux, IBM i (16), macOS</span>
<span>(64), Windows (32767), and NetBSD (32), etc. The name will be truncated</span>
<span>if </span><code>name</code><span> is larger than the limit of the platform.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvthreadgetnamethread'><code>uv.thread_getname(thread)</code></h3><blockquote><p><span>method form </span><code>thread:getname()</code></p></blockquote><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>thread</code><span>: </span><code>luv_thread_t userdata</code></p></li></ul><p><span>Gets the name of the thread specified by </span><code>thread</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>string</code><span> or </span><code>fail</code></p><h3 id='uvsleepmsec'><code>uv.sleep(msec)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>msec</code><span>: </span><code>integer</code></p></li></ul><p><span>Pauses the thread in which this is called for a number of milliseconds.</span></p><p><strong><span>Returns:</span></strong><span> Nothing.</span></p><h2 id='miscellaneous-utilities'><span>Miscellaneous utilities</span></h2><h3 id='uvexepath'><code>uv.exepath()</code></h3><p><span>Returns the executable path.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>string</code><span> or </span><code>fail</code></p><h3 id='uvcwd'><code>uv.cwd()</code></h3><p><span>Returns the current working directory.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>string</code><span> or </span><code>fail</code></p><h3 id='uvchdircwd'><code>uv.chdir(cwd)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>cwd</code><span>: </span><code>string</code></p></li></ul><p><span>Sets the current working directory with the string </span><code>cwd</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvgetprocesstitle'><code>uv.get_process_title()</code></h3><p><span>Returns the title of the current process.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>string</code><span> or </span><code>fail</code></p><h3 id='uvsetprocesstitletitle'><code>uv.set_process_title(title)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>title</code><span>: </span><code>string</code></p></li></ul><p><span>Sets the title of the current process with the string </span><code>title</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvgettotalmemory'><code>uv.get_total_memory()</code></h3><p><span>Returns the current total system memory in bytes.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>number</code></p><h3 id='uvgetfreememory'><code>uv.get_free_memory()</code></h3><p><span>Returns the current free system memory in bytes.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>number</code></p><h3 id='uvgetconstrainedmemory'><code>uv.get_constrained_memory()</code></h3><p><span>Gets the amount of memory available to the process in bytes based on limits</span>
<span>imposed by the OS. If there is no such constraint, or the constraint is unknown,</span>
<span>0 is returned. Note that it is not unusual for this value to be less than or</span>
<span>greater than the total system memory.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>number</code></p><h3 id='uvgetavailablememory'><code>uv.get_available_memory()</code></h3><p><span>Gets the amount of free memory that is still available to the process (in</span>
<span>bytes). This differs from </span><code>uv.get_free_memory()</code><span> in that it takes into account</span>
<span>any limits imposed by the OS. If there is no such constraint, or the constraint</span>
<span>is unknown, the amount returned will be identical to </span><code>uv.get_free_memory()</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>number</code></p><h3 id='uvresidentsetmemory'><code>uv.resident_set_memory()</code></h3><p><span>Returns the resident set size (RSS) for the current process.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer</code><span> or </span><code>fail</code></p><h3 id='uvgetrusage'><code>uv.getrusage()</code></h3><p><span>Returns the resource usage.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>table</code><span> or </span><code>fail</code></p><ul><li><p><code>utime</code><span> : </span><code>table</code><span> (user CPU time used)</span></p><ul><li><p><code>sec</code><span> : </span><code>integer</code></p></li><li><p><code>usec</code><span> : </span><code>integer</code></p></li></ul></li><li><p><code>stime</code><span> : </span><code>table</code><span> (system CPU time used)</span></p><ul><li><p><code>sec</code><span> : </span><code>integer</code></p></li><li><p><code>usec</code><span> : </span><code>integer</code></p></li></ul></li><li><p><code>maxrss</code><span> : </span><code>integer</code><span> (maximum resident set size)</span></p></li><li><p><code>ixrss</code><span> : </span><code>integer</code><span> (integral shared memory size)</span></p></li><li><p><code>idrss</code><span> : </span><code>integer</code><span> (integral unshared data size)</span></p></li><li><p><code>isrss</code><span> : </span><code>integer</code><span> (integral unshared stack size)</span></p></li><li><p><code>minflt</code><span> : </span><code>integer</code><span> (page reclaims (soft page faults))</span></p></li><li><p><code>majflt</code><span> : </span><code>integer</code><span> (page faults (hard page faults))</span></p></li><li><p><code>nswap</code><span> : </span><code>integer</code><span> (swaps)</span></p></li><li><p><code>inblock</code><span> : </span><code>integer</code><span> (block input operations)</span></p></li><li><p><code>oublock</code><span> : </span><code>integer</code><span> (block output operations)</span></p></li><li><p><code>msgsnd</code><span> : </span><code>integer</code><span> (IPC messages sent)</span></p></li><li><p><code>msgrcv</code><span> : </span><code>integer</code><span> (IPC messages received)</span></p></li><li><p><code>nsignals</code><span> : </span><code>integer</code><span> (signals received)</span></p></li><li><p><code>nvcsw</code><span> : </span><code>integer</code><span> (voluntary context switches)</span></p></li><li><p><code>nivcsw</code><span> : </span><code>integer</code><span> (involuntary context switches)</span></p></li></ul><h3 id='uvgetrusagethread'><code>uv.getrusage_thread()</code></h3><p><span>Gets the resource usage measures for the calling thread.</span></p><p><strong><span>Note</span></strong><span> Not supported on all platforms. May return </span><code>ENOTSUP</code><span>.</span>
<span>On macOS and Windows not all fields are set (the unsupported fields are filled</span>
<span>with zeroes).</span></p><p><strong><span>Returns:</span></strong><span> </span><code>table</code><span> or </span><code>fail</code></p><ul><li><p><code>utime</code><span> : </span><code>table</code><span> (user CPU time used)</span></p><ul><li><p><code>sec</code><span> : </span><code>integer</code></p></li><li><p><code>usec</code><span> : </span><code>integer</code></p></li></ul></li><li><p><code>stime</code><span> : </span><code>table</code><span> (system CPU time used)</span></p><ul><li><p><code>sec</code><span> : </span><code>integer</code></p></li><li><p><code>usec</code><span> : </span><code>integer</code></p></li></ul></li><li><p><code>maxrss</code><span> : </span><code>integer</code><span> (maximum resident set size)</span></p></li><li><p><code>ixrss</code><span> : </span><code>integer</code><span> (integral shared memory size)</span></p></li><li><p><code>idrss</code><span> : </span><code>integer</code><span> (integral unshared data size)</span></p></li><li><p><code>isrss</code><span> : </span><code>integer</code><span> (integral unshared stack size)</span></p></li><li><p><code>minflt</code><span> : </span><code>integer</code><span> (page reclaims (soft page faults))</span></p></li><li><p><code>majflt</code><span> : </span><code>integer</code><span> (page faults (hard page faults))</span></p></li><li><p><code>nswap</code><span> : </span><code>integer</code><span> (swaps)</span></p></li><li><p><code>inblock</code><span> : </span><code>integer</code><span> (block input operations)</span></p></li><li><p><code>oublock</code><span> : </span><code>integer</code><span> (block output operations)</span></p></li><li><p><code>msgsnd</code><span> : </span><code>integer</code><span> (IPC messages sent)</span></p></li><li><p><code>msgrcv</code><span> : </span><code>integer</code><span> (IPC messages received)</span></p></li><li><p><code>nsignals</code><span> : </span><code>integer</code><span> (signals received)</span></p></li><li><p><code>nvcsw</code><span> : </span><code>integer</code><span> (voluntary context switches)</span></p></li><li><p><code>nivcsw</code><span> : </span><code>integer</code><span> (involuntary context switches)</span></p></li></ul><h3 id='uvavailableparallelism'><code>uv.available_parallelism()</code></h3><p><span>Returns an estimate of the default amount of parallelism a program should use. Always returns a non-zero value.</span></p><p><span>On Linux, inspects the calling thread’s CPU affinity mask to determine if it has been pinned to specific CPUs.</span></p><p><span>On Windows, the available parallelism may be underreported on systems with more than 64 logical CPUs.</span></p><p><span>On other platforms, reports the number of CPUs that the operating system considers to be online.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer</code></p><h3 id='uvcpuinfo'><code>uv.cpu_info()</code></h3><p><span>Returns information about the CPU(s) on the system as a table of tables for each</span>
<span>CPU found.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>table</code><span> or </span><code>fail</code></p><ul><li><p><code>[1, 2, 3, ..., n]</code><span> : </span><code>table</code></p><ul><li><p><code>model</code><span> : </span><code>string</code></p></li><li><p><code>speed</code><span> : </span><code>number</code></p></li><li><p><code>times</code><span> : </span><code>table</code></p><ul><li><p><code>user</code><span> : </span><code>number</code></p></li><li><p><code>nice</code><span> : </span><code>number</code></p></li><li><p><code>sys</code><span> : </span><code>number</code></p></li><li><p><code>idle</code><span> : </span><code>number</code></p></li><li><p><code>irq</code><span> : </span><code>number</code></p></li></ul></li></ul></li></ul><h3 id='uvcpumasksize'><code>uv.cpumask_size()</code></h3><p><span>Returns the maximum size of the mask used for process/thread affinities, or</span>
<code>ENOTSUP</code><span> if affinities are not supported on the current platform.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer</code><span> or </span><code>fail</code></p><h3 id='uvgetpid'><code>uv.getpid()</code></h3><p><strong><span>Deprecated:</span></strong><span> Please use </span><code>uv.os_getpid()</code><span> instead.</span></p><h3 id='uvgetuid'><code>uv.getuid()</code></h3><p><span>Returns the user ID of the process.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer</code></p><p><strong><span>Note:</span></strong><span> This is not a libuv function and is not supported on Windows.</span></p><h3 id='uvgetgid'><code>uv.getgid()</code></h3><p><span>Returns the group ID of the process.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer</code></p><p><strong><span>Note:</span></strong><span> This is not a libuv function and is not supported on Windows.</span></p><h3 id='uvsetuidid'><code>uv.setuid(id)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>id</code><span>: </span><code>integer</code></p></li></ul><p><span>Sets the user ID of the process with the integer </span><code>id</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> Nothing.</span></p><p><strong><span>Note:</span></strong><span> This is not a libuv function and is not supported on Windows.</span></p><h3 id='uvsetgidid'><code>uv.setgid(id)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>id</code><span>: </span><code>integer</code></p></li></ul><p><span>Sets the group ID of the process with the integer </span><code>id</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> Nothing.</span></p><p><strong><span>Note:</span></strong><span> This is not a libuv function and is not supported on Windows.</span></p><h3 id='uvhrtime'><code>uv.hrtime()</code></h3><p><span>Returns a current high-resolution time in nanoseconds as a number. This is</span>
<span>relative to an arbitrary time in the past. It is not related to the time of day</span>
<span>and therefore not subject to clock drift. The primary use is for measuring</span>
<span>time between intervals.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>number</code></p><h3 id='uvclockgettimeclockid'><code>uv.clock_gettime(clock_id)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>clock_id</code><span>: </span><code>string</code></p></li></ul><p><span>Obtain the current system time from a high-resolution real-time or monotonic</span>
<span>clock source. </span><code>clock_id</code><span> can be the string </span><code>&quot;monotonic&quot;</code><span> or </span><code>&quot;realtime&quot;</code><span>.</span></p><p><span>The real-time clock counts from the UNIX epoch (1970-01-01) and is subject</span>
<span>to time adjustments; it can jump back in time.</span></p><p><span>The monotonic clock counts from an arbitrary point in the past and never</span>
<span>jumps back in time.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>table</code><span> or </span><code>fail</code></p><ul><li><p><code>sec</code><span>: </span><code>integer</code></p></li><li><p><code>nsec</code><span>: </span><code>integer</code></p></li></ul><h3 id='uvuptime'><code>uv.uptime()</code></h3><p><span>Returns the current system uptime in seconds.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>number</code><span> or </span><code>fail</code></p><h3 id='uvprintallhandles'><code>uv.print_all_handles()</code></h3><p><span>Prints all handles associated with the main loop to stderr. The format is</span>
<code>[flags] handle-type handle-address</code><span>. Flags are </span><code>R</code><span> for referenced, </span><code>A</code><span> for</span>
<span>active and </span><code>I</code><span> for internal.</span></p><p><strong><span>Returns:</span></strong><span> Nothing.</span></p><p><strong><span>Note:</span></strong><span> This is not available on Windows.</span></p><p><strong><span>Warning:</span></strong><span> This function is meant for ad hoc debugging, there are no API/ABI</span>
<span>stability guarantees.</span></p><h3 id='uvprintactivehandles'><code>uv.print_active_handles()</code></h3><p><span>The same as </span><code>uv.print_all_handles()</code><span> except only active handles are printed.</span></p><p><strong><span>Returns:</span></strong><span> Nothing.</span></p><p><strong><span>Note:</span></strong><span> This is not available on Windows.</span></p><p><strong><span>Warning:</span></strong><span> This function is meant for ad hoc debugging, there are no API/ABI</span>
<span>stability guarantees.</span></p><h3 id='uvguesshandlefd'><code>uv.guess_handle(fd)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>fd</code><span>: </span><code>integer</code></p></li></ul><p><span>Used to detect what type of stream should be used with a given file</span>
<span>descriptor </span><code>fd</code><span>. Usually this will be used during initialization to guess the</span>
<span>type of the stdio streams.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>string</code></p><h3 id='uvgettimeofday'><code>uv.gettimeofday()</code></h3><p><span>Cross-platform implementation of </span><code>gettimeofday(2)</code><span>. Returns the seconds and</span>
<span>microseconds of a unix time as a pair.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>integer, integer</code><span> or </span><code>fail</code></p><h3 id='uvinterfaceaddresses'><code>uv.interface_addresses()</code></h3><p><span>Returns address information about the network interfaces on the system in a</span>
<span>table. Each table key is the name of the interface while each associated value</span>
<span>is an array of address information where fields are </span><code>ip</code><span>, </span><code>family</code><span>, </span><code>netmask</code><span>,</span>
<code>internal</code><span>, and </span><code>mac</code><span>.</span></p><p><span>See </span><a href='#constants' target='_blank'><span>Constants</span></a><span> for supported address </span><code>family</code><span> output values.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>table</code></p><ul><li><p><code>[name(s)]</code><span> : </span><code>table</code></p><ul><li><p><code>ip</code><span> : </span><code>string</code></p></li><li><p><code>family</code><span> : </span><code>string</code></p></li><li><p><code>netmask</code><span> : </span><code>string</code></p></li><li><p><code>internal</code><span> : </span><code>boolean</code></p></li><li><p><code>mac</code><span> : </span><code>string</code></p></li></ul></li></ul><h3 id='uvifindextonameifindex'><code>uv.if_indextoname(ifindex)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>ifindex</code><span>: </span><code>integer</code></p></li></ul><p><span>IPv6-capable implementation of </span><code>if_indextoname(3)</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>string</code><span> or </span><code>fail</code></p><h3 id='uvifindextoiidifindex'><code>uv.if_indextoiid(ifindex)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>ifindex</code><span>: </span><code>integer</code></p></li></ul><p><span>Retrieves a network interface identifier suitable for use in an IPv6 scoped</span>
<span>address. On Windows, returns the numeric </span><code>ifindex</code><span> as a string. On all other</span>
<span>platforms, </span><code>uv.if_indextoname()</code><span> is used.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>string</code><span> or </span><code>fail</code></p><h3 id='uvloadavg'><code>uv.loadavg()</code></h3><p><span>Returns the load average as a triad. Not supported on Windows.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>number, number, number</code></p><h3 id='uvosuname'><code>uv.os_uname()</code></h3><p><span>Returns system information.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>table</code></p><ul><li><p><code>sysname</code><span> : </span><code>string</code></p></li><li><p><code>release</code><span> : </span><code>string</code></p></li><li><p><code>version</code><span> : </span><code>string</code></p></li><li><p><code>machine</code><span> : </span><code>string</code></p></li></ul><h3 id='uvosgethostname'><code>uv.os_gethostname()</code></h3><p><span>Returns the hostname.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>string</code></p><h3 id='uvosgetenvname-size'><code>uv.os_getenv(name, [size])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>name</code><span>: </span><code>string</code></p></li><li><p><code>size</code><span>: </span><code>integer</code><span> (default = </span><code>LUAL_BUFFERSIZE</code><span>)</span></p></li></ul><p><span>Returns the environment variable specified by </span><code>name</code><span> as string. The internal</span>
<span>buffer size can be set by defining </span><code>size</code><span>. If omitted, </span><code>LUAL_BUFFERSIZE</code><span> is</span>
<span>used. If the environment variable exceeds the storage available in the internal</span>
<span>buffer, </span><code>ENOBUFS</code><span> is returned. If no matching environment variable exists,</span>
<code>ENOENT</code><span> is returned.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>string</code><span> or </span><code>fail</code></p><p><strong><span>Warning:</span></strong><span> This function is not thread safe.</span></p><h3 id='uvossetenvname-value'><code>uv.os_setenv(name, value)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>name</code><span>: </span><code>string</code></p></li><li><p><code>value</code><span>: </span><code>string</code></p></li></ul><p><span>Sets the environmental variable specified by </span><code>name</code><span> with the string </span><code>value</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Warning:</span></strong><span> This function is not thread safe.</span></p><h3 id='uvosunsetenvname'><code>uv.os_unsetenv(name)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>name</code><span>: </span><code>string</code></p></li></ul><p><span>Unsets the environmental variable specified by </span><code>name</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><p><strong><span>Warning:</span></strong><span> This function is not thread safe.</span></p><h3 id='uvosenviron'><code>uv.os_environ()</code></h3><p><span>Returns all environmental variables as a dynamic table of names associated with</span>
<span>their corresponding values.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>table</code></p><p><strong><span>Warning:</span></strong><span> This function is not thread safe.</span></p><h3 id='uvoshomedir'><code>uv.os_homedir()</code></h3><p><strong><span>Returns:</span></strong><span> </span><code>string</code><span> or </span><code>fail</code></p><p><strong><span>Warning:</span></strong><span> This function is not thread safe.</span></p><h3 id='uvostmpdir'><code>uv.os_tmpdir()</code></h3><p><strong><span>Returns:</span></strong><span> </span><code>string</code><span> or </span><code>fail</code></p><p><strong><span>Warning:</span></strong><span> This function is not thread safe.</span></p><h3 id='uvosgetpasswd'><code>uv.os_get_passwd()</code></h3><p><span>Returns password file information.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>table</code></p><ul><li><p><code>username</code><span> : </span><code>string</code></p></li><li><p><code>uid</code><span> : </span><code>integer</code></p></li><li><p><code>gid</code><span> : </span><code>integer</code></p></li><li><p><code>shell</code><span> : </span><code>string</code></p></li><li><p><code>homedir</code><span> : </span><code>string</code></p></li></ul><h3 id='uvosgetpid'><code>uv.os_getpid()</code></h3><p><span>Returns the current process ID.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>number</code></p><h3 id='uvosgetppid'><code>uv.os_getppid()</code></h3><p><span>Returns the parent process ID.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>number</code></p><h3 id='uvosgetprioritypid'><code>uv.os_getpriority(pid)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>pid</code><span>: </span><code>integer</code></p></li></ul><p><span>Returns the scheduling priority of the process specified by </span><code>pid</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>number</code><span> or </span><code>fail</code></p><h3 id='uvossetprioritypid-priority'><code>uv.os_setpriority(pid, priority)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>pid</code><span>: </span><code>integer</code></p></li><li><p><code>priority</code><span>: </span><code>integer</code></p></li></ul><p><span>Sets the scheduling priority of the process specified by </span><code>pid</code><span>. The </span><code>priority</code>
<span>range is between -20 (high priority) and 19 (low priority).</span></p><p><strong><span>Returns:</span></strong><span> </span><code>boolean</code><span> or </span><code>fail</code></p><h3 id='uvrandomlen-flags-callback'><code>uv.random(len, flags, [callback])</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>len</code><span>: </span><code>integer</code></p></li><li><p><code>flags</code><span>: </span><code>nil</code><span> (see below)</span></p></li><li><p><code>callback</code><span>: </span><code>callable</code><span> (async version) or </span><code>nil</code><span> (sync version)</span></p><ul><li><p><code>err</code><span>: </span><code>nil</code><span> or </span><code>string</code></p></li><li><p><code>bytes</code><span>: </span><code>string</code><span> or </span><code>nil</code></p></li></ul></li></ul><p><span>Fills a string of length </span><code>len</code><span> with cryptographically strong random bytes</span>
<span>acquired from the system CSPRNG. </span><code>flags</code><span> is reserved for future extension</span>
<span>and must currently be </span><code>nil</code><span> or </span><code>0</code><span> or </span><code>{}</code><span>.</span></p><p><span>Short reads are not possible. When less than </span><code>len</code><span> random bytes are available,</span>
<span>a non-zero error value is returned or passed to the callback. If the callback</span>
<span>is omitted, this function is completed synchronously.</span></p><p><span>The synchronous version may block indefinitely when not enough entropy is</span>
<span>available. The asynchronous version may not ever finish when the system is</span>
<span>low on entropy.</span></p><p><strong><span>Returns (sync version):</span></strong><span> </span><code>string</code><span> or </span><code>fail</code></p><p><strong><span>Returns (async version):</span></strong><span> </span><code>0</code><span> or </span><code>fail</code></p><h3 id='uvtranslatesyserrorerrcode'><code>uv.translate_sys_error(errcode)</code></h3><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>errcode</code><span>: </span><code>integer</code></p></li></ul><p><span>Returns the libuv error message and error name (both in string form, see </span><a href='#error-handling'><code>err</code><span> and </span><code>name</code><span> in Error Handling</span></a><span>) equivalent to the given platform dependent error code: POSIX error codes on Unix (the ones stored in errno), and Win32 error codes on Windows (those returned by GetLastError() or WSAGetLastError()).</span></p><p><strong><span>Returns:</span></strong><span> </span><code>string, string</code><span> or </span><code>nil</code></p><h2 id='metrics-operations'><span>Metrics operations</span></h2><h3 id='uvmetricsidletime'><code>uv.metrics_idle_time()</code></h3><p><span>Retrieve the amount of time the event loop has been idle in the kernel’s event</span>
<span>provider (e.g. </span><code>epoll_wait</code><span>). The call is thread safe.</span></p><p><span>The return value is the accumulated time spent idle in the kernel’s event</span>
<span>provider starting from when the </span><a href='#uv_loop_t--event-loop' target='_blank'><code>uv_loop_t</code></a><span> was configured to collect the idle time.</span></p><p><strong><span>Note:</span></strong><span> The event loop will not begin accumulating the event provider’s idle</span>
<span>time until calling </span><code>loop_configure</code><span> with </span><code>&quot;metrics_idle_time&quot;</code><span>.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>number</code></p><h3 id='uvmetricsinfo'><code>uv.metrics_info()</code></h3><p><span>Get the metrics table from current set of event loop metrics. It is recommended</span>
<span>to retrieve these metrics in a </span><code>prepare</code><span> callback (see </span><code>uv.new_prepare</code><span>,</span>
<code>uv.prepare_start</code><span>) in order to make sure there are no inconsistencies with the</span>
<span>metrics counters.</span></p><p><strong><span>Returns:</span></strong><span> </span><code>table</code></p><ul><li><p><code>loop_count</code><span> : </span><code>integer</code></p></li><li><p><code>events</code><span> : </span><code>integer</code></p></li><li><p><code>events_waiting</code><span> : </span><code>integer</code></p></li></ul><h2 id='string-manipulation-functions'><span>String manipulation functions</span></h2><p><span>These string utilities are needed internally for dealing with Windows, and are exported to allow clients to work uniformly with this data when the libuv API is not complete.</span></p><p><strong><span>Notes</span></strong><span>:</span></p><ol start='' ><li><p><span>New in luv version 1.49.0.</span></p></li><li><p><span>See </span><a href='https://simonsapin.github.io/wtf-8/'><span>the WTF-8 spec</span></a><span> for information about WTF-8.</span></p></li><li><p><span>Luv uses Lua-style strings, which means that all inputs and return values (UTF-8 or UTF-16 strings) do not include a NUL terminator.</span></p></li></ol><h3 id='uvutf16lengthaswtf8utf16'><code>uv.utf16_length_as_wtf8(utf16)</code></h3><p><span>Get the length (in bytes) of a UTF-16 (or UCS-2) string </span><code>utf16</code><span> value after converting it to WTF-8. The endianness of the UTF-16 (or UCS-2) string is assumed to be the same as the native endianness of the platform.</span></p><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>utf16</code><span>: </span><code>string</code></p></li></ul><p><strong><span>Returns:</span></strong><span> </span><code>integer</code></p><h3 id='uvutf16towtf8utf16'><code>uv.utf16_to_wtf8(utf16)</code></h3><p><span>Convert UTF-16 (or UCS-2) string </span><code>utf16</code><span> to WTF-8 string. The endianness of the UTF-16 (or UCS-2) string is assumed to be the same as the native endianness of the platform.</span></p><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>utf16</code><span>: </span><code>string</code></p></li></ul><p><strong><span>Returns:</span></strong><span> </span><code>string</code></p><h3 id='uvwtf8lengthasutf16wtf8'><code>uv.wtf8_length_as_utf16(wtf8)</code></h3><p><span>Get the length (in UTF-16 code units) of a WTF-8 </span><code>wtf8</code><span> value after converting it to UTF-16 (or UCS-2). Note: The number of bytes needed for a UTF-16 (or UCS-2) string is </span><code>&lt;number of code units&gt; * 2</code><span>.</span></p><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>wtf8</code><span>: </span><code>string</code></p></li></ul><p><strong><span>Returns:</span></strong><span> </span><code>integer</code></p><h3 id='uvwtf8toutf16wtf8'><code>uv.wtf8_to_utf16(wtf8)</code></h3><p><span>Convert WTF-8 string in </span><code>wtf8</code><span> to UTF-16 (or UCS-2) string. The endianness of the UTF-16 (or UCS-2) string will be the same as the native endianness of the platform.</span></p><p><strong><span>Parameters:</span></strong></p><ul><li><p><code>wtf8</code><span>: </span><code>string</code></p></li></ul><p><strong><span>Returns:</span></strong><span> </span><code>string</code></p><hr /></div></div>
</body>
</html>